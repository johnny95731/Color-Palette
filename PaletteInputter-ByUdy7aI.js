import{d as a,e as m,r as l,u as t,L as Y,c as r,f as v,w as c,a as o,h as x,o as f,j as y,q as k,l as V,m as A,F as U,M as Z,I as G,k as _,p as C,_ as g,H as B,G as F,B as z,N as ie,s as h,O as ee,v as D,P as me,Q as _e,R as se,S as ec,T as $,y as L,U as ua}from"./index-Bv2sRdl9.js";import{_ as S}from"./VDialog.vue_vue_type_style_index_0_lang-xM9sRmyW.js";const e={paletteInputer:"_paletteInputer_1886b6e",palette:"_palette_7ff3ac0",color:"_color_4b3eb95"},xe=["for"],we=["onUpdate:modelValue"],K=a({__name:"PaletteInputter",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const s=m(a,"modelValue"),n=l(!0),d=t(),u=l([]),i=l([]),p=l(),b=l({top:0,zIndex:1}),P=l(null),w=l(null),{start:I}=(()=>{let e=null,l=null;const a=e=>ua(Math.floor(e.y/100*v(i).length),0,v(i).length-1),o=l=>{L(e)||(b.value.top=l.y-e+"%")};return Y(p,{P:p,me:!1,M:s=>{P.value=a(s),l=100/v(i).length,e=l*(v(P)+.5),o(s)},S:l=>{L(P)||L(e)||(o(l),w.value=a(l))},ve:()=>{if(!L(P)){if(v(P)!==w.value&&!L(w.value)){const e=v(i).splice(v(P),1)[0];v(i).splice(w.value,0,e)}P.value=null,w.value=null,b.value.top=0}}})})(),M=r((()=>({top:v(w)>v(P)?"100%":0}))),R=()=>{d.B(v(n)?v(i):v(u))},j=()=>{d.B(v(i)),E(),_e(s)},E=()=>{u.value=o(d.R,(e=>e.Pt))};c((()=>[v(n),v(i)]),R,{deep:!0}),c(s,(e=>{e?(i.value=o(d.R,(e=>e.Pt)),E(),R()):d.B(v(u))}),{immediate:!0});const q=()=>{v(i).push(se(ec()))};return(l,a)=>(f(),x(S,{overlayProps:{contentClass:v(e).paletteInputer},title:"輸入調色盤",modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value=e)},{actions:y((()=>[_(g,{"prepend-icon":"plus",text:"新增",disabled:i.value.length===v(ie),onClick:q},null,8,["disabled"]),a[1]||(h(-1),(a[1]=k("div",{class:"spacer"})).cacheIndex=1,h(1),a[1]),a[2]||(h(-1),(a[2]=k("label",null,[ee(k("input",{type:"checkbox",name:"preview","onUpdate:modelValue":e=>n.value=e},null,8,we),[[me,n.value]]),a[5]||(a[5]=D(" 預覽 "))])).cacheIndex=2,h(1),a[2]),a[3]||(h(-1),(a[3]=_(g,{text:"確定",onClick:j})).cacheIndex=3,h(1),a[3])])),default:y((()=>[k("div",{ref_key:"contentRef",ref:p,class:V(v(e).palette)},[(f(!0),A(U,null,Z(i.value,((l,o)=>(f(),A("div",{key:o,class:V(v(e).color),style:G(o===P.value&&b.value)},[_(g,{icon:"list",onPointerdown:a[0]||(a[0]=e=>v(I)(e))}),k("label",{for:`color${o+1}`,style:G({background:l,color:l})},B(`color${o+1}`),13,xe),_(F,{id:`color${o+1}`,modelValue:i.value[o],"onUpdate:modelValue":e=>i.value[o]=e,onPaste:e=>((e,l)=>{var a;const o=(null==(a=e.clipboardData)?void 0:a.getData("text"))??"",s=[];for(const e of o.split("-"))$(e)&&s.push(e.startsWith("#")?e:"#"+e);do{v(i).splice(l++,1,s.shift())}while(l<ie&&s.length);l<v(i).length&&v(i).splice(l,v(i).length-l)})(e,o)},null,8,["id","modelValue","onUpdate:modelValue","onPaste"]),i.value.length>2?(f(),x(g,{key:0,icon:"x-lg","aria-label":"移除",onClick:e=>{return l=o,void v(i).splice(l,1);var l}},null,8,["onClick"])):C("",!0),o!==P.value&&o===w.value?(f(),x(z,{key:1,style:G(M.value),icon:"arrow-left"},null,8,["style"])):C("",!0)],6)))),128))],2)])),_:1},8,["overlayProps","modelValue"]))}});export{K as default};