import{d as e,a6 as l,r as a,c as o,a9 as s,o as t,a2 as n,w as d,u as i,l as r,v as c,A as u,$ as m,s as p,aa as _,T as b,ab as v,G as f,x as h,a1 as w,O as k,ac as y,a7 as x,b as V,a as g,ad as C,ae as B,af as U,n as D,q as K,t as M,I as R,U as S,F as T,D as A,_ as F,J as I,ag as $,z as j,K as q,a8 as z}from"./index-3Ykjcyu_.js";const G={settingDialog:"_settingDialog_59wru_1",header:"_header_59wru_9",menubar:"_menubar_59wru_30",tab:"_tab_59wru_36",selected:"_selected_59wru_44",content:"_content_59wru_50",region:"_region_59wru_56",buttons:"_buttons_59wru_98",applyBtn:"_applyBtn_59wru_111",resetBtn:"_resetBtn_59wru_116"},J={class:"switch"},L=["id","value","checked"],O=["aria-checked","value"],P=["for"],W=e({__name:"TheSwitch",props:l({inputId:{},label:{},hideLabel:{type:Boolean},value:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=e,k=a(),y=a(),x=o((()=>l.inputId??s("slider"))),V=o((()=>{var e;return l.label?(null==(e=l.label)?void 0:e.startsWith("#"))?{"aria-labelledby":l.label.slice(1)}:{"aria-label":l.label}:{}}));t((()=>{var e;if(!(null==(e=l.label)?void 0:e.startsWith("#")))return;const a=document.getElementById(l.label.slice(1));a&&(a.htmlFor=n(x))})),d((()=>[l.label,n(x)]),((e,l)=>{var a;const o=e[0]===l[0],s=e[1]===l[1];if(o||[l[0],e[0]].forEach(((l,a)=>{if(l&&l.startsWith("#")){const o=document.getElementById(l.slice(1));o&&(0===a?o.removeAttribute("for"):o.htmlFor=e[1])}})),!s&&(null==(a=e[0])?void 0:a.startsWith("#"))){const l=document.getElementById(e[0].slice(1));l&&(l.htmlFor=e[1])}}));const g=i(e,"modelValue");function C(){w(g)}function B(e){" "===e.key.toLowerCase()&&w(g)}return(e,l)=>(r(),c("div",J,[u(p("input",_({class:"field",ref_key:"inputRef",ref:k},V.value,{id:x.value,type:"checkbox",value:e.value,checked:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),onFocus:l[1]||(l[1]=e=>{var l;null==(l=y.value)||l.focus()})}),null,16,L),[[m,g.value]]),p("div",_({ref_key:"switchRef",ref:y},V.value,{class:"switch__slider",tabindex:"0",role:"switch","aria-checked":g.value,value:e.value,onClick:C,onKeydown:B}),null,16,O),V.value["aria-label"]?(r(),c("label",{key:0,class:b([e.hideLabel&&"field"]),for:x.value,onClick:l[2]||(l[2]=v((e=>{var l;C(),null==(l=y.value)||l.focus()}),["prevent"]))},f(V.value["aria-label"]),11,P)):h("",!0)]))}}),E=["white","gray","black"],H=e({__name:"SettingDialog",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:l(["focusoutDialog"],["update:modelValue"]),setup(e,{emit:l}){const s=l,t=i(e,"modelValue"),n=k(),u=y(),m=["Card","Contrast"],_=a(0),v=a([]);function f(e){z(e)&&(e.preventDefault(),t.value=!1,s("focusoutDialog"))}d(t,(async e=>{var l;await x(),e&&1===_.value?(n.setIsAdjustingPlt("start"),H()):!e&&n.isAdjustingPlt&&n.setIsAdjustingPlt("cancel"),null==(l=V(v)[V(_)])||l.$el.focus()}));const w=e=>{1===e?(n.setIsAdjustingPlt("start"),H()):1===_.value&&n.setIsAdjustingPlt("cancel"),_.value=e},J=g({pos:u.transition.pos,color:u.transition.color}),L=(e,l)=>{"pos"===l?J.pos=e:J.color=e,u.setTransition(l,e)},O=g(C.reduce(((e,l,a)=>(e[a]=1)&&e),{method:0})),P=o((()=>O.method?B:U));function H(){n.adjustContrast(O.method,O[O.method])}const N=e=>{n.setIsAdjustingPlt(e),O[O.method]=1,H()};return(e,l)=>(r(),D(q,{"content-class":V(G).settingDialog,role:"dialog",eager:!0,transition:"slide-y",transparent:"",modelValue:t.value,"onUpdate:modelValue":l[11]||(l[11]=e=>t.value=e)},{default:K((()=>[l[0]||(M(-1),(l[0]=p("header",{class:b(V(G).header)},[l[12]||(l[12]=p("h2",null,"設定",-1)),R(S,{icon:"close","aria-label":"close",onClick:e=>t.value=!1},null,8,["onClick"])],2)).cacheIndex=0,M(1),l[0]),p("div",{class:b(V(G).menubar)},[(r(),c(T,null,A(m,((e,l)=>R(S,{key:`setting-${e}`,ref_for:!0,ref:e=>v.value[l]=e,class:b([V(G).tab,l===_.value&&V(G).selected]),text:e,onClick:e=>w(l)},null,8,["class","text","onClick"]))),64))],2),p("div",{class:b(V(G).content)},[0===_.value?(r(),c(T,{key:0},[p("div",{class:b(V(G).region),"aria-labelledby":"title-Border"},[l[14]||(l[14]=p("h3",{id:"title-Border"}," Border ",-1)),l[15]||(l[15]=p("span",null,"Show",-1)),R(W,{label:"show border","hide-label":"","model-value":V(u).border.show,"onUpdate:modelValue":l[1]||(l[1]=e=>V(u).setBorder("show",e))},null,8,["model-value"]),V(u).border.show?(r(),c(T,{key:0},[l[13]||(l[13]=p("label",{id:"border-width"},"Width(px)",-1)),R(F,{label:"#border-width",max:V(10),"model-value":V(u).border.width,"onUpdate:modelValue":l[2]||(l[2]=e=>V(u).setBorder("width",e))},null,8,["max","model-value"]),p("label",{id:"border-color",class:b(V(G).subOption)},"Color",2),R(I,{class:b(V(G).subOption),label:"#border-color",items:V(E),"model-value":V(u).border.color,"letter-case":"title","onUpdate:modelValue":l[3]||(l[3]=e=>V(u).setBorder("color",e))},null,8,["class","items","model-value"])],64)):h("",!0)],2),p("div",{class:b(V(G).region)},[l[16]||(l[16]=p("h3",null,"Transition",-1)),l[17]||(l[17]=p("label",{id:"transition-position"},"Position1(ms)",-1)),R(F,{label:"#transition-position",max:V(1e3),step:"50","model-value":V(u).transition.pos,"onUpdate:modelValue":l[4]||(l[4]=e=>L(e,"pos"))},null,8,["max","model-value"]),l[18]||(l[18]=p("label",{id:"transition-color"},"Color(ms)",-1)),R(F,{label:"#transition-color",max:V(3e3),step:"50","model-value":J.color,"onUpdate:modelValue":l[5]||(l[5]=e=>L(e,"color")),onKeydown:l[6]||(l[6]=$((e=>w(1)),["tab"]))},null,8,["max","model-value"])],2)],64)):1===_.value?(r(),c("div",{key:1,class:b(V(G).region)},[l[7]||(M(-1),(l[7]=p("label",{id:"contrast-method"},[l[19]||(l[19]=j("Method"))])).cacheIndex=7,M(1),l[7]),R(I,{label:"#contrast-method",items:V(C),index:O.method,"onUpdate:index":l[8]||(l[8]=e=>{return l=e,O.method=l,n.setIsAdjustingPlt("reset"),void H();var l})},null,8,["items","index"]),2!==O.method?(r(),c(T,{key:0},[l[20]||(l[20]=p("label",{id:"contrast-coeff-name"},"Coeff.",-1)),R(F,{label:"#contrast-coeff-name",max:P.value,step:"0.001","model-value":O[O.method],"onUpdate:modelValue":l[9]||(l[9]=e=>{O[O.method]=e,H()})},null,8,["max","model-value"])],64)):h("",!0),l[10]||(M(-1),(l[10]=p("div",{class:b(V(G).buttons)},[R(S,{text:"Reset",class:b(V(G).resetBtn),onClick:e=>N("reset")},null,8,["class","onClick"]),R(S,{text:"Apply",class:b(V(G).applyBtn),onKeydown:f,onClick:e=>N("start")},null,8,["class","onClick"])],2)).cacheIndex=10,M(1),l[10])],2)):h("",!0)],2)])),l:1},8,["content-class","modelValue"]))}});export{H as default};
