import{d as e,b as a,r as o,w as l,X as n,Y as t,a as s,Z as r,c,J as d,$ as i,e as u,a0 as m,a1 as p,a2 as _,a3 as k,a4 as f,f as v,a5 as h,K as y,V as b,h as g,o as V,j as x,q as w,m as F,p as U,s as C,H as P,x as S,t as B,y as T,A as M,D as $,E as j,B as z,F as O,k as R,v as D,a6 as H,a7 as E,L as q,a8 as A,a9 as G,u as J,R as K,aa as L,ab as Q,l as X,ac as Y,_ as Z,ad as I,ae as N,O as W,af as ee,P as ae,ag as oe,Q as le}from"./index-DpBU5HkE.js";import{_ as ne}from"./VDialog.vue_vue_type_style_index_0_lang-D8B-YuzK.js";const te={genDialog:"_genDialog_6a0eddf",palette:"_palette_4678db8",numbers:"_numbers_83c6648"},se={class:"color-picker__pickers"},re={class:"color-picker__canvas"},ce={key:0,class:"color-picker__mask"},de={class:"color-picker__edits"},ie={class:"color-picker__hex-input"},ue={class:"color-picker__hsb-inputs"},me=["name","max","onUpdate:modelValue"],pe={class:"color-picker__variants"},_e=e({__name:"ColorPicker",props:{show:{type:Boolean,default:!1},showModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(e){const G=a(e,"show"),J=o("wheel"),K=o(),L=o(),Q=o(),X=o(0),Y=()=>{var e;"wheel"===u(J)&&L.value?X.value=H(E(null==(e=K.value)?void 0:e.overlayContentRef,"--wheel-width")/(2*t),2):X.value=0};l(J,(()=>Y()),{flush:"post"}),n((()=>{var e,a;null==(a=null==(e=K.value)?void 0:e.overlayContentRef)||a.style.setProperty("--canvas-size",`${t}px`),Y()}));const Z=s([0,r.hsl[1],r.hsl[2]]),I=(e,a=!0)=>{e=u(e);const o=q("string"==typeof e?A(e):e,a?e=>m(e,2):e=>e);Object.assign(Z,o)},N=c({get:()=>i(Z),set(e){e!==N.value&&d(e)&&I(e)}}),W=c((()=>i([Z[0],r.hsl[1],r.hsl[2]]))),ee=s({top:"0",left:"0",background:""}),ae=c((()=>({background:`linear-gradient(0deg, #000, #0000), linear-gradient(90deg, #ffff, #fff0), ${W.value}`}))),oe=o({}),le=c((()=>"rect"===u(J)?{o:e=>{Z[1]=p(e.x,0,100,0,r.hsl[1],2),Z[2]=p(e.y,0,100,r.hsl[2],0,2)},l:()=>({top:r.hsl[2]-Z[2]+"%",left:Z[1]+"%",background:i(Z)}),t:e=>{Z[0]=m(e,2)},i:()=>({background:W.value})}:"rounded"===u(J)?{o:e=>{const{deg:a,radius:o}=k(p(e.y,0,100,-1,1,4),p(e.x,0,100,-1,1,4));Z[0]=f(a+90,360),Z[1]=p(o,0,1,0,r.hsl[1],2)},l:()=>{const{x:e,y:a}=_(Z[1],Z[0]-90,2);return{top:p(a,-r.hsl[1],r.hsl[1],0,100,1)+"%",left:p(e,-r.hsl[1],r.hsl[1],0,100,1)+"%",background:i(Z)}},t:e=>{Z[2]=m(e,2)},i:()=>({background:i([0,0,Z[2]])})}:{o:e=>{const{deg:a}=k(p(e.y,0,100,-1,1,4),p(e.x,0,100,-1,1,4),2);Z[0]=f(a+90,360)},l:()=>{const{x:e,y:a}=_(50-X.value,Z[0]-90);return{top:a+50+"%",left:e+50+"%",background:W.value}},u:e=>{Z[1]=p(e.x,0,100,0,r.hsl[1],2),Z[2]=p(e.y,0,100,r.hsl[2],0,2)},i:()=>({left:p(Z[1],0,r.hsl[1],0,100,2)+"%",top:p(Z[2],0,r.hsl[2],100,0,2)+"%",background:N.value})})),te={};n((()=>{var e;const a=null==(e=L.value)?void 0:e.getContext("2d");if(!a)return;const o=a.createLinearGradient(0,0,t,0);o.addColorStop(0,"#fff"),o.addColorStop(1,"#fff0"),te.m=o;const l=a.createLinearGradient(0,0,0,t);l.addColorStop(0,"#0000"),l.addColorStop(1,"#000"),te.p=l;const n=a.createConicGradient(-Math.PI/2,t/2,t/2),s=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"];v(s,((e,a,o)=>n.addColorStop(o/(s.length-1),a))),te._=n}));const _e=()=>{var e;const a=null==(e=L.value)?void 0:e.getContext("2d");a&&a.clearRect(0,0,t,t)},ke=e=>{var a;const o=null==(a=L.value)?void 0:a.getContext("2d");o&&(o.fillStyle=u(e),o.fillRect(0,0,t,t))},fe=c((()=>{var e;const a=null==(e=L.value)?void 0:e.getContext("2d");if(a)return"rect"===u(J)?()=>{_e(),ke(W),ke(te.m),ke(te.p)}:"rounded"===u(J)?()=>{_e(),ke(te._),ke("#000000"+p(Z[2],0,r.hsl[2],255,0,0).toString(16));const e=t/2,o=a.createRadialGradient(e,e,0,e,e,e),l=i([0,0,Z[2]]);o.addColorStop(0,l),o.addColorStop(1,l+"00"),ke(o)}:(_e(),ke(te._),null)})),ve=()=>{var e;Object.assign(ee,le.value.l()),oe.value=le.value.i(),null==(e=fe.value)||e.call(fe)};l((()=>[u(J),Z]),ve,{deep:!0,flush:"post"}),n((()=>{ve()}));const he=h((()=>{const e=e=>{le.value.o(e)},{start:a}=y(L,{k:L,v:e,h:e});return a})),ye=h((()=>{const e=e=>{le.value.u(e)},{start:a}=y(Q,{k:Q,v:e,h:e});return a})),be=a(e,"modelValue");return b(u(be))||I(be,!1),l(Z,(e=>{be.value=e}),{immediate:!0}),l(be,(e=>{I(e)}),{deep:!0}),(e,a)=>(V(),g(ne,{ref_key:"dialogRef",ref:K,overlayProps:{contentClass:["color-picker",`color-picker--${J.value}`]},title:"Color Picker",modelValue:G.value,"onUpdate:modelValue":a[7]||(a[7]=e=>G.value=e)},{content:x((()=>[w("div",se,[w("div",re,[a[0]||(C(-1),(a[0]=w("canvas",{ref_key:"canvasPickerRef",ref:L,width:u(t),height:u(t)},null,8,["width","height"])).cacheIndex=0,C(1),a[0]),"wheel"===J.value?(V(),F("div",ce)):U("",!0),w("div",{class:"color-picker__thumb",style:P(ee),onPointerdown:a[1]||(a[1]=(...e)=>u(he)&&u(he)(...e))},null,36)]),"wheel"!==J.value?(V(),g(S,{key:0,showRange:!1,min:"0",max:"rect"===J.value?u(r).hsl[0]:u(r).hsl[2],trackerBackground:"rect"===J.value?"linear-gradient(to right, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)":"linear-gradient(to right, #000, #fff)",thumbBackground:oe.value.background,"model-value":"rect"===J.value?Z[0]:Z[2],"onUpdate:modelValue":le.value.t},null,8,["max","trackerBackground","thumbBackground","model-value","onUpdate:modelValue"])):(V(),F("div",{key:1,ref_key:"secondPickerRef",ref:Q,class:"color-picker__rect-picker",style:P(ae.value)},[w("div",{class:"color-picker__thumb",rectPickerThumeStyle:"",style:P(oe.value),onPointerdown:a[2]||(a[2]=(...e)=>u(ye)&&u(ye)(...e))},null,36)],4))]),w("div",de,[w("div",{class:"color-picker__preview",style:P({background:N.value})},null,4),w("label",ie,[a[8]||(a[8]=B(" Hex ")),T(w("input",{name:"color-piker-hex",maxlength:"7",size:"7","onUpdate:modelValue":a[3]||(a[3]=e=>N.value=e)},null,512),[[M,N.value,void 0,{lazy:!0}]])]),w("div",ue,[(V(),F(O,null,$([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],o,l,n)=>{const t=[Z[o]];if(n&&n.key===e&&j(n,t))return n;const s=(V(),F("label",{key:e},[B(z(a)+" ",1),T(w("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:u(r).hsb[o],step:"any","onUpdate:modelValue":e=>Z[o]=e},null,8,me),[[M,Z[o],void 0,{lazy:!0}]])]));return s.memo=t,s}),a,4),64))]),w("div",pe,[a[9]||(a[9]=B(" 樣式 ")),R(D,{items:["rect","rounded","wheel"],modelValue:J.value,"onUpdate:modelValue":a[6]||(a[6]=e=>J.value=e)},null,8,["modelValue"])])])])),V:1},8,["overlayProps","modelValue"]))}}),ke=["analogous","shades","tints","tones","triad","square","complement","split complement","tetradic1","tetradic2","tetradic3"],fe=(e,a,o,l)=>v(l-1,(l=>(l.push(G(e,a)),a+=o,l)),[e]),ve=e=>fe(e,180,180,2),he=e=>fe(e,150,60,3),ye=e=>fe(e,120,120,3),be=e=>fe(e,90,90,4),ge=e=>[e,G(e,30),G(e,-30)],Ve=e=>{const a=ve(e);return a.push(...ve(G(e,30))),a},xe=e=>{const a=ve(e);return a.push(...ve(G(e,60))),a},we=e=>{const a=ve(e);return a.push(G(e,30)),a.push(G(a[1],-30)),a},Fe=(e,a=6)=>{const[o,l,n]=e,t=n/a;return q(a,((e,a)=>[o,l,n-a*t]))},Ue=(e,a=6)=>{const[o,l,n]=e,t=l/a;return q(a,((e,a)=>[o,l-a*t,n]))},Ce=(e,a=6)=>{const[o,l,n]=e,t=l/a,s=n/a;return q(a,((e,a)=>[o,l-a*t,n-a*s]))},Pe=["aria-label","onClick"],Se=["min","max"],Be=e({__name:"HarmonyGenerator",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const n=a(e,"modelValue"),t=o(!1),d=J(),i=o([0,r.hsl[1],r.hsl[2]]),m=s({method:0,num:6}),p=c((()=>{const e=(e=>{const a=ke.indexOf(e);return 0===a?ge:1===a?Fe:2===a?Ue:3===a?Ce:4===a?ye:5===a?be:6===a?ve:7===a?he:8===a?Ve:9===a?xe:we})(ke[m.method]);return q(e([...u(i)],m.num),(e=>K(L(e))))})),_=o(!0),k=()=>{d.F(u(_)?u(p):u(v))};l((()=>[u(_),u(p)]),k);const f=()=>{d.F(u(p)),h(),le(n)},v=o([[]]),h=()=>{v.value=q(d.U,(e=>e.C))};return l(n,(e=>{e?(h(),k()):d.F(u(v))}),{immediate:!0}),(e,a)=>(V(),g(ne,{"overlay-props":{contentClass:u(te).genDialog},title:"調和調色盤",modelValue:n.value,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value=e)},{actions:x((()=>[w("label",null,[T(w("input",{type:"checkbox",name:"preview","onUpdate:modelValue":a[8]||(a[8]=e=>_.value=e)},null,512),[[ae,_.value]]),a[14]||(a[14]=B(" 預覽 "))]),a[9]||(C(-1),(a[9]=R(Z,{onClick:f,text:"確定"})).cacheIndex=9,C(1),a[9])])),default:x((()=>[Q(p.value,(()=>(V(),F("div",{class:X(u(te).palette)},[R(Y,{location:"top",text:"Copied",openOnHover:!1,openOnClick:"",eager:!1},{activator:x((({handleClick:e})=>[(V(!0),F(O,null,$(p.value,((o,l)=>(V(),F("button",{key:l,type:"button",style:P({background:o}),"aria-label":`color ${o}`,onClick:a=>{var o;o=l,oe(u(p)[o]),e(a)}},a[11]||(a[11]=[w("div",{class:"btn__overlay"},null,-1)]),12,Pe)))),128))])),V:1})],2))),a,0),Q([p.value[0]],(()=>R(Z,{style:P({color:u(I)(u(N)(p.value[0]))>127?"#000":"#FFF",background:p.value[0]}),"prepend-icon":"eyedropper",text:"開啟color picker",onClick:a[1]||(a[1]=e=>t.value=!t.value)},null,8,["style"])),a,2),R(_e,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value=e),show:t.value,"onUpdate:show":a[4]||(a[4]=e=>t.value=e)},null,8,["modelValue","show"]),w("div",null,[a[12]||(a[12]=B(" 調和方法 ")),R(D,{items:u(ke),index:m.method,"onUpdate:index":a[5]||(a[5]=e=>m.method=e)},null,8,["items","index"])]),1<=m.method&&m.method<=3?Q([m],(()=>(V(),F("div",{key:0,class:X(u(te).numbers)},[a[13]||(a[13]=w("label",{for:"harmony-num"},"數量",-1)),T(w("input",{id:"harmony-num",name:"harmony-num",type:"number",min:u(ee),max:u(W),"onUpdate:modelValue":a[6]||(a[6]=e=>m.num=e)},null,8,Se),[[M,m.num,void 0,{lazy:!0,number:!0}]])],2))),a,7):U("",!0)])),V:1},8,["overlay-props","modelValue"]))}});export{Be as default};
