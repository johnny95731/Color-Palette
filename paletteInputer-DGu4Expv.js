import{d as a,e as c,r as e,u as s,K as Z,w as r,b as m,L as oe,h as f,o as x,j as g,q as C,l as h,m as y,F as U,D as B,H as R,k as v,p as V,_ as b,B as z,z as M,N as D,O as me,s as k,y as I,t as F,P as _e,Q as fe,J as T,R as ne,S as mc,T as Mc,U as Sc,V as W,W as Ca}from"./index-B1MLadSF.js";import{_ as j}from"./VDialog.vue_vue_type_style_index_0_lang-RN5oy6TX.js";const q={paletteInputer:"_paletteInputer_6f61c2f",palette:"_palette_b9e91ad",color:"_color_f1c9a85"},De=["for"],He=["id","value","onChange","onKeydown"],ye=["onUpdate:modelValue"],G=a({__name:"paletteInputer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const l=c(a,"modelValue"),o=e(!0),n=s(),t=e([]),i=e([]),d=e(),u=e({top:0,zIndex:1}),p=e(null),_=e(null),{start:w}=(()=>{let e=null,a=null;const l=e=>Ca(Math.floor(e.y/100*m(i).length),0,m(i).length-1),o=a=>{W(e)||(u.value.top=a.y-e+"%")};return Z(d,{U:d,re:!1,C:n=>{p.value=l(n),a=100/m(i).length,e=a*(m(p)+.5),o(n)},P:a=>{W(p)||W(e)||(o(a),_.value=l(a))},ie:()=>{if(!W(p)){if(m(p)!==_.value&&!W(_.value)){const e=m(i).splice(m(p),1)[0];m(i).splice(_.value,0,e)}p.value=null,_.value=null,u.value.top=0}}})})(),P=()=>{n.B(m(o)?m(i):m(t))},K=()=>{n.B(m(i)),S(),fe(l)},S=()=>{t.value=oe(n.T,(e=>e.yt))};r((()=>[m(o),m(i)]),P,{deep:!0}),r(l,(e=>{e?(i.value=oe(n.T,(e=>e.yt)),S(),P()):n.B(m(t))}),{immediate:!0});const $=()=>{m(i).push(ne(mc()))};return(e,a)=>(x(),f(j,{overlayProps:{contentClass:m(q).paletteInputer},title:"輸入調色盤",modelValue:l.value,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value=e)},{actions:g((()=>[v(b,{"prepend-icon":"plus",text:"新增",disabled:i.value.length===m(me),onClick:$},null,8,["disabled"]),a[2]||(k(-1),(a[2]=C("div",{class:"spacer"})).cacheIndex=2,k(1),a[2]),a[3]||(k(-1),(a[3]=C("label",null,[I(C("input",{type:"checkbox",name:"preview","onUpdate:modelValue":e=>o.value=e},null,8,ye),[[_e,o.value]]),a[6]||(a[6]=F(" 預覽 "))])).cacheIndex=3,k(1),a[3]),a[4]||(k(-1),(a[4]=v(b,{text:"確定",onClick:K})).cacheIndex=4,k(1),a[4])])),default:g((()=>[C("div",{ref_key:"contentRef",ref:d,class:h(m(q).palette)},[(x(!0),y(U,null,B(i.value,((e,l)=>(x(),y("div",{key:l,class:h(m(q).color),style:R(l===p.value&&u.value)},[v(b,{icon:"list",onPointerdown:a[0]||(a[0]=e=>m(w)(e))}),C("label",{for:`color${l+1}`,style:R({background:e,color:e})},z(`color${l+1}`),13,De),C("input",{id:`color${l+1}`,maxlength:"7",size:"7",value:e,onInput:a[1]||(a[1]=e=>m(M)(e)),onChange:e=>function(e,a){const l=e.currentTarget.value;l!==m(i)[a]&&T(l)&&(m(i)[a]=l)}(e,l),onKeydown:e=>(async(e,a)=>{if(Mc(e)&&"v"===e.key.toLowerCase()){const e=await Sc();if(e){const l=[];for(const a of e.split("-"))T(a)&&l.push(a.startsWith("#")?a:"#"+a);do{m(i).splice(a++,1,l.shift())}while(a<me&&l.length);a<m(i).length&&m(i).splice(a,m(i).length-a)}}})(e,l)},null,40,He),i.value.length>2?(x(),f(b,{key:0,icon:"x-lg","aria-label":"移除",onClick:e=>{return a=l,void m(i).splice(a,1);var a}},null,8,["onClick"])):V("",!0),l!==p.value&&l===_.value?(x(),f(D,{key:1,type:"arrow-left"})):V("",!0)],6)))),128))],2)])),_:1},8,["overlayProps","modelValue"]))}});export{G as default};