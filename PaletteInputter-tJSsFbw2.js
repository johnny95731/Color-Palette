import{d as a,e as p,r as l,u as t,J as Y,c as i,b as m,w as c,K as se,h as v,o as x,j as b,q as k,l as V,m as A,F as L,L as ee,H as I,k as _,p as C,_ as g,D as B,B as F,z as U,N as pe,s as h,O as oe,t as D,P as fe,Q as ve,R as de,S as nu,T as O,U as Z,V as Oa}from"./index-C6ci0KaB.js";import{_ as j}from"./VDialog.vue_vue_type_style_index_0_lang-DfIKtjuN.js";const e={paletteInputer:"_paletteInputer_1886b6e",palette:"_palette_7ff3ac0",color:"_color_4b3eb95"},He=["for"],Ee=["onUpdate:modelValue"],q=a({__name:"PaletteInputter",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const o=p(a,"modelValue"),s=l(!0),n=t(),d=l([]),r=l([]),u=l(),f=l({top:0,zIndex:1}),y=l(null),P=l(null),{start:w}=(()=>{let e=null,l=null;const a=e=>Oa(Math.floor(e.y/100*m(r).length),0,m(r).length-1),o=l=>{Z(e)||(f.value.top=l.y-e+"%")};return Y(u,{U:u,ae:!1,C:t=>{y.value=a(t),l=100/m(r).length,e=l*(m(y)+.5),o(t)},P:l=>{Z(y)||Z(e)||(o(l),P.value=a(l))},ue:()=>{if(!Z(y)){if(m(y)!==P.value&&!Z(P.value)){const e=m(r).splice(m(y),1)[0];m(r).splice(P.value,0,e)}y.value=null,P.value=null,f.value.top=0}}})})(),K=i((()=>({top:m(P)>m(y)?"100%":0}))),M=()=>{n.B(m(s)?m(r):m(d))},$=()=>{n.B(m(r)),z(),ve(o)},z=()=>{d.value=se(n.T,(e=>e.$t))};c((()=>[m(s),m(r)]),M,{deep:!0}),c(o,(e=>{e?(r.value=se(n.T,(e=>e.$t)),z(),M()):n.B(m(d))}),{immediate:!0});const E=()=>{m(r).push(de(nu()))};return(l,a)=>(x(),v(j,{overlayProps:{contentClass:m(e).paletteInputer},title:"輸入調色盤",modelValue:o.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value=e)},{actions:b((()=>[_(g,{"prepend-icon":"plus",text:"新增",disabled:r.value.length===m(pe),onClick:E},null,8,["disabled"]),a[1]||(h(-1),(a[1]=k("div",{class:"spacer"})).cacheIndex=1,h(1),a[1]),a[2]||(h(-1),(a[2]=k("label",null,[oe(k("input",{type:"checkbox",name:"preview","onUpdate:modelValue":e=>s.value=e},null,8,Ee),[[fe,s.value]]),a[5]||(a[5]=D(" 預覽 "))])).cacheIndex=2,h(1),a[2]),a[3]||(h(-1),(a[3]=_(g,{text:"確定",onClick:$})).cacheIndex=3,h(1),a[3])])),default:b((()=>[k("div",{ref_key:"contentRef",ref:u,class:V(m(e).palette)},[(x(!0),A(L,null,ee(r.value,((l,o)=>(x(),A("div",{key:o,class:V(m(e).color),style:I(o===y.value&&f.value)},[_(g,{icon:"list",onPointerdown:a[0]||(a[0]=e=>m(w)(e))}),k("label",{for:`color${o+1}`,style:I({background:l,color:l})},B(`color${o+1}`),13,He),_(F,{id:`color${o+1}`,modelValue:r.value[o],"onUpdate:modelValue":e=>r.value[o]=e,onPaste:e=>((e,l)=>{var a;const o=(null==(a=e.clipboardData)?void 0:a.getData("text"))??"",t=[];for(const e of o.split("-"))O(e)&&t.push(e.startsWith("#")?e:"#"+e);do{m(r).splice(l++,1,t.shift())}while(l<pe&&t.length);l<m(r).length&&m(r).splice(l,m(r).length-l)})(e,o)},null,8,["id","modelValue","onUpdate:modelValue","onPaste"]),r.value.length>2?(x(),v(g,{key:0,icon:"x-lg","aria-label":"移除",onClick:e=>{return l=o,void m(r).splice(l,1);var l}},null,8,["onClick"])):C("",!0),o!==y.value&&o===P.value?(x(),v(U,{key:1,style:I(K.value),type:"arrow-left"},null,8,["style"])):C("",!0)],6)))),128))],2)])),_:1},8,["overlayProps","modelValue"]))}});export{q as default};