import{d as a,e as m,r as e,u as s,K as N,c as n,b as c,w as r,L as oe,h as f,o as x,j as _,q as C,l as h,m as y,F as U,D as M,H as P,k as v,p as k,_ as b,B,z as I,N as D,O as me,s as V,y as z,t as F,P as _e,Q as ve,J as E,R as ne,S as mc,T as Mc,U as Sc,V as W,W as Ca}from"./index-B9yzo3kp.js";import{_ as j}from"./VDialog.vue_vue_type_style_index_0_lang-gx7ZcAvF.js";const G={paletteInputer:"_paletteInputer_93a2890",palette:"_palette_4044008",color:"_color_efb6a10"},De=["for"],He=["id","value","onChange","onKeydown"],ye=["onUpdate:modelValue"],K=a({__name:"paletteInputer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const l=m(a,"modelValue"),o=e(!0),t=s(),i=e([]),u=e([]),d=e(),p=e({top:0,zIndex:1}),g=e(null),w=e(null),{start:K}=(()=>{let e=null,a=null;const l=e=>Ca(Math.floor(e.y/100*c(u).length),0,c(u).length-1),o=a=>{W(e)||(p.value.top=a.y-e+"%")};return N(d,{U:d,ie:!1,C:n=>{g.value=l(n),a=100/c(u).length,e=a*(c(g)+.5),o(n)},P:a=>{W(g)||W(e)||(o(a),w.value=l(a))},se:()=>{if(!W(g)){if(c(g)!==w.value&&!W(w.value)){const e=c(u).splice(c(g),1)[0];c(u).splice(w.value,0,e)}g.value=null,w.value=null,p.value.top=0}}})})(),$=n((()=>({top:c(w)>c(g)?"100%":0}))),R=()=>{t.B(c(o)?c(u):c(i))},S=()=>{t.B(c(u)),q(),ve(l)},q=()=>{i.value=oe(t.T,(e=>e.bt))};r((()=>[c(o),c(u)]),R,{deep:!0}),r(l,(e=>{e?(u.value=oe(t.T,(e=>e.bt)),q(),R()):t.B(c(i))}),{immediate:!0});const A=()=>{c(u).push(ne(mc()))};return(e,a)=>(x(),f(j,{overlayProps:{contentClass:c(G).paletteInputer},title:"輸入調色盤",modelValue:l.value,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value=e)},{actions:_((()=>[v(b,{"prepend-icon":"plus",text:"新增",disabled:u.value.length===c(me),onClick:A},null,8,["disabled"]),a[2]||(V(-1),(a[2]=C("div",{class:"spacer"})).cacheIndex=2,V(1),a[2]),a[3]||(V(-1),(a[3]=C("label",null,[z(C("input",{type:"checkbox",name:"preview","onUpdate:modelValue":e=>o.value=e},null,8,ye),[[_e,o.value]]),a[6]||(a[6]=F(" 預覽 "))])).cacheIndex=3,V(1),a[3]),a[4]||(V(-1),(a[4]=v(b,{text:"確定",onClick:S})).cacheIndex=4,V(1),a[4])])),default:_((()=>[C("div",{ref_key:"contentRef",ref:d,class:h(c(G).palette)},[(x(!0),y(U,null,M(u.value,((e,l)=>(x(),y("div",{key:l,class:h(c(G).color),style:P(l===g.value&&p.value)},[v(b,{icon:"list",onPointerdown:a[0]||(a[0]=e=>c(K)(e))}),C("label",{for:`color${l+1}`,style:P({background:e,color:e})},B(`color${l+1}`),13,De),C("input",{id:`color${l+1}`,maxlength:"7",size:"7",value:e,onInput:a[1]||(a[1]=e=>c(I)(e)),onChange:e=>function(e,a){const l=e.currentTarget.value;l!==c(u)[a]&&E(l)&&(c(u)[a]=l)}(e,l),onKeydown:e=>(async(e,a)=>{if(Mc(e)&&"v"===e.key.toLowerCase()){const e=await Sc();if(e){const l=[];for(const a of e.split("-"))E(a)&&l.push(a.startsWith("#")?a:"#"+a);do{c(u).splice(a++,1,l.shift())}while(a<me&&l.length);a<c(u).length&&c(u).splice(a,c(u).length-a)}}})(e,l)},null,40,He),u.value.length>2?(x(),f(b,{key:0,icon:"x-lg","aria-label":"移除",onClick:e=>{return a=l,void c(u).splice(a,1);var a}},null,8,["onClick"])):k("",!0),l!==g.value&&l===w.value?(x(),f(D,{key:1,style:P($.value),type:"arrow-left"},null,8,["style"])):k("",!0)],6)))),128))],2)])),_:1},8,["overlayProps","modelValue"]))}});export{K as default};