import{d as e,f as u,r as a,w as m,V as P,h as p,W as M,b as i,c as d,T,X as $,Y as O,Z as R,$ as H,a0 as Z,a1 as N,K as W,L as Q,A as F,i as v,o as f,k as b,v as h,q as V,s as A,t as C,I as w,B as U,x as k,l as _,G as j,M as X,a2 as Y,O as ee,H as q,a3 as ae,F as L,z,a4 as le,a5 as oe,m as t,a6 as ne,u as l,R as te,a7 as se,a8 as re,p as g,C as G,_ as E,a9 as de,aa as ce,N as ie,ab as ue,P as me,ac as pe,Q as _e}from"./index-ByZGjEZk.js";import{_ as D}from"./VDialog.vue_vue_type_style_index_0_lang-DsFvqvJA.js";const I={genDialog:"_genDialog_6a0eddf",palette:"_palette_4678db8",numbers:"_numbers_83c6648"},ke={class:"color-picker__pickers"},ve={class:"color-picker__canvas"},fe={key:0,class:"color-picker__mask"},ye={class:"color-picker__edits"},he={class:"color-picker__hex-input"},be={class:"color-picker__hsb-inputs"},ge=["name","onUpdate:modelValue"],Ve={class:"color-picker__variants"},y=e({__name:"ColorPicker",props:{show:{type:Boolean,default:!1},showModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(e){const l=u(e,"show"),o=a("wheel"),n=a(),s=a(),r=a(),c=a(0),y=()=>{var e;"wheel"===p(o)&&p(s)?c.value=le(oe(null==(e=p(n))?void 0:e.overlayContentRef,"--wheel-width")/(2*M),2):c.value=0};m(o,(()=>y()),{flush:"post"}),P((()=>{var e,a;null==(a=null==(e=p(n))?void 0:e.overlayContentRef)||a.style.setProperty("--canvas-size",`${M}px`),y()}));const g=i([0,100,100]),x=(e,a=!0)=>{e=p(e);const l=t("string"==typeof e?ne(e):e,a?e=>O(e,2):e=>e);Object.assign(g,l)},S=d({get:()=>$(g),set(e){e!==p(S)&&T(e)&&x(e)}}),B=d((()=>$([g[0],100,100]))),E=i({top:"0",left:"0",background:""}),G=d((()=>({background:`linear-gradient(0deg, #000, #0000), linear-gradient(90deg, #ffff, #fff0), ${p(B)}`}))),I=a({}),J=d((()=>"rect"===p(o)?{p:e=>{g[1]=O(e.x,2),g[2]=O(100-e.y,2)},k:()=>({top:100-g[2]+"%",left:g[1]+"%",background:$(g)}),v:e=>{g[0]=O(e,2)},h:()=>({background:p(B)})}:"rounded"===p(o)?{p:e=>{const{deg:a,radius:l}=Z(H(e.y,0,100,-1,1,4),H(e.x,0,100,-1,1,4));g[0]=N(a+90,360),g[1]=H(l,0,1,0,100,2)},k:()=>{const{x:e,y:a}=R(g[1],g[0]-90,2);return{top:H(a,-100,100,0,100,1)+"%",left:H(e,-100,100,0,100,1)+"%",background:$(g)}},v:e=>{g[2]=O(e,2)},h:()=>({background:$([0,0,g[2]])})}:{p:e=>{const{deg:a}=Z(H(e.y,0,100,-1,1,4),H(e.x,0,100,-1,1,4),2);g[0]=N(a+90,360)},k:()=>{const{x:e,y:a}=R(50-p(c),g[0]-90);return{top:a+50+"%",left:e+50+"%",background:p(B)}},V:e=>{g[1]=O(e.x,2),g[2]=O(100-e.y,2)},h:()=>({left:O(g[1],2)+"%",top:O(100-g[2],2)+"%",background:p(S)})})),K={};P((()=>{var e;const a=null==(e=p(s))?void 0:e.getContext("2d");if(!a)return;const l=a.createLinearGradient(0,0,M,0);l.addColorStop(0,"#fff"),l.addColorStop(1,"#fff0"),K.F=l;const o=a.createLinearGradient(0,0,0,M);o.addColorStop(0,"#0000"),o.addColorStop(1,"#000"),K.U=o;const n=a.createConicGradient(-Math.PI/2,M/2,M/2),t=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"];W(t,((e,a,l)=>n.addColorStop(l/(t.length-1),a))),K.C=n}));const te=()=>{var e;const a=null==(e=p(s))?void 0:e.getContext("2d");a&&a.clearRect(0,0,M,M)},se=e=>{var a;const l=null==(a=p(s))?void 0:a.getContext("2d");l&&(l.fillStyle=p(e),l.fillRect(0,0,M,M))},re=d((()=>{var e;const a=null==(e=p(s))?void 0:e.getContext("2d");if(a)return"rect"===p(o)?()=>{te(),se(B),se(K.F),se(K.U)}:"rounded"===p(o)?()=>{te(),se(K.C),se("#000000"+H(g[2],0,100,255,0,0).toString(16));const e=M/2,l=a.createRadialGradient(e,e,0,e,e,e),o=$([0,0,g[2]]);l.addColorStop(0,o),l.addColorStop(1,o+"00"),se(l)}:(te(),se(K.C),null)})),de=()=>{var e;Object.assign(E,p(J).k()),I.value=p(J).h(),null==(e=p(re))||e()};m((()=>[p(o),g]),de,{deep:!0,flush:"post"}),P((()=>{de()}));const ce=(()=>{const e=e=>{p(J).p(e)},{start:a}=Q(s,{P:s,S:e,B:e});return a})(),ie=(()=>{const e=e=>{p(J).V(e)},{start:a}=Q(r,{P:r,S:e,B:e});return a})(),ue=u(e,"modelValue");return F(p(ue))||x(ue,!1),m(g,(e=>{ue.value=e}),{immediate:!0}),m(ue,(e=>{x(e)}),{deep:!0}),(e,a)=>(f(),v(D,{ref_key:"dialogRef",ref:n,overlayProps:{contentClass:["color-picker",`color-picker--${o.value}`]},title:"Color Picker",modelValue:l.value,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value=e)},{content:b((()=>[h("div",ke,[h("div",ve,[a[0]||(C(-1),(a[0]=h("canvas",{ref_key:"canvasPickerRef",ref:s,width:p(M),height:p(M)},null,8,["width","height"])).cacheIndex=0,C(1),a[0]),"wheel"===o.value?(f(),V("div",fe)):A("",!0),h("div",{class:"color-picker__thumb",style:w(E),onPointerdown:a[1]||(a[1]=(...e)=>p(ce)&&p(ce)(...e))},null,36)]),"wheel"!==o.value?(f(),v(U,{key:0,showRange:!1,min:"0",max:"rect"===o.value?360:100,trackerBackground:"rect"===o.value?"linear-gradient(to right, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)":"linear-gradient(to right, #000, #fff)",thumbBackground:I.value.background,"model-value":"rect"===o.value?g[0]:g[2],"onUpdate:modelValue":J.value.v},null,8,["max","trackerBackground","thumbBackground","model-value","onUpdate:modelValue"])):(f(),V("div",{key:1,ref_key:"secondPickerRef",ref:r,class:"color-picker__rect-picker",style:w(G.value)},[h("div",{class:"color-picker__thumb",rectPickerThumeStyle:"",style:w(I.value),onPointerdown:a[2]||(a[2]=(...e)=>p(ie)&&p(ie)(...e))},null,36)],4))]),h("div",ye,[h("div",{class:"color-picker__preview",style:w({background:S.value})},null,4),h("label",he,[a[8]||(a[8]=k(" Hex ")),_(j,{modelValue:S.value,"onUpdate:modelValue":a[3]||(a[3]=e=>S.value=e),modelModifiers:{lazy:!0},name:"color-piker-hex"},null,8,["modelValue"])]),h("div",be,[(f(),V(L,null,X([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],l,o,n)=>{const t=[g[l]];if(n&&n.key===e&&Y(n,t))return n;const s=(f(),V("label",{key:e},[k(q(a)+" ",1),ee(h("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:"100",step:"any","onUpdate:modelValue":e=>g[l]=e},null,8,ge),[[ae,g[l],void 0,{lazy:!0}]])]));return s.memo=t,s}),a,4),64))]),h("div",Ve,[a[9]||(a[9]=k(" 樣式 ")),_(z,{items:["rect","rounded","wheel"],modelValue:o.value,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value=e)},null,8,["modelValue"])])])])),_:1},8,["overlayProps","modelValue"]))}}),we=["aria-label","onClick"],xe=["min","max"],K=e({__name:"HarmonyGenerator",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const o=u(e,"modelValue"),n=a(!1),s=l(),r=a([0,100,100]),c=i({l:3,M:6}),x=d((()=>t(se(p(r),c.l,c.M),(e=>te(e))))),F=a(!0),U=()=>{s.T(p(F)?p(x):p(S))};m((()=>[p(F),p(x)]),U);const P=()=>{s.T(p(x)),B(),_e(o)},S=a([[]]),B=()=>{S.value=t(s.$,(e=>e.j))};return m(o,(e=>{e?(B(),U()):s.T(p(S))}),{immediate:!0}),(e,a)=>(f(),v(D,{"overlay-props":{contentClass:p(I).genDialog},title:"調和調色盤",modelValue:o.value,"onUpdate:modelValue":a[10]||(a[10]=e=>o.value=e)},{actions:b((()=>[h("label",null,[ee(h("input",{type:"checkbox",name:"preview","onUpdate:modelValue":a[8]||(a[8]=e=>F.value=e)},null,512),[[me,F.value]]),a[14]||(a[14]=k(" 預覽 "))]),a[9]||(C(-1),(a[9]=_(E,{onClick:P,text:"確定"})).cacheIndex=9,C(1),a[9])])),default:b((()=>[re(x.value,(()=>(f(),V("div",{class:g(p(I).palette)},[_(G,{location:"top",text:"Copied",openOnHover:!1,openOnClick:"",eager:!1},{activator:b((({handleClick:e})=>[(f(!0),V(L,null,X(x.value,((l,o)=>(f(),V("button",{key:o,type:"button",style:w({background:l}),"aria-label":`color ${l}`,onClick:a=>{var l;l=o,pe(p(x)[l]),e(a)}},a[11]||(a[11]=[h("div",{class:"btn__overlay"},null,-1)]),12,we)))),128))])),_:1})],2))),a,0),re([x.value[0]],(()=>_(E,{style:w({color:p(de)(x.value[0])?"#000":"#FFF",background:x.value[0]}),"prepend-icon":"eyedropper",text:"開啟color picker",onClick:a[1]||(a[1]=e=>n.value=!n.value)},null,8,["style"])),a,2),_(y,{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e),show:n.value,"onUpdate:show":a[4]||(a[4]=e=>n.value=e)},null,8,["modelValue","show"]),h("div",null,[a[12]||(a[12]=k(" 調和方法 ")),_(z,{items:p(ce),idx:c.l,"onUpdate:idx":a[5]||(a[5]=e=>c.l=e)},null,8,["items","idx"])]),c.l<3?re([c],(()=>(f(),V("div",{key:0,class:g(p(I).numbers)},[a[13]||(a[13]=h("label",{for:"harmony-num"},"數量",-1)),ee(h("input",{id:"harmony-num",name:"harmony-num",type:"number",min:p(ue),max:p(ie),"onUpdate:modelValue":a[6]||(a[6]=e=>c.M=e)},null,8,xe),[[ae,c.M,void 0,{lazy:!0,number:!0}]])],2))),a,7):A("",!0)])),_:1},8,["overlay-props","modelValue"]))}});export{K as default};