import{d as a,e as c,r as e,w as r,X as $,b as m,Y as O,a as t,Z as H,c as n,J as T,$ as L,a0 as X,a1 as J,a2 as K,a3 as N,a4 as Q,f as l,a5 as Y,K as Z,V as W,h as f,o as x,j as g,q as C,m as y,p as V,s as k,H as R,x as j,t as F,y as I,A as w,D as B,E as P,B as z,F as U,k as v,v as A,a6 as ee,a7 as ae,L as oe,a8 as le,a9 as te,u as s,R as ne,aa as se,ab as re,l as h,ac as ce,_ as de,ad as ie,ae as ue,O as me,af as pe,P as _e,ag as ke,Q as fe}from"./index-B1MLadSF.js";import{_ as D}from"./VDialog.vue_vue_type_style_index_0_lang-RN5oy6TX.js";const q={genDialog:"_genDialog_6a0eddf",palette:"_palette_4678db8",numbers:"_numbers_83c6648"},ve={class:"color-picker__pickers"},he={class:"color-picker__canvas"},ye={key:0,class:"color-picker__mask"},be={class:"color-picker__edits"},ge={class:"color-picker__hex-input"},Ve={class:"color-picker__hsb-inputs"},xe=["name","max","onUpdate:modelValue"],we={class:"color-picker__variants"},b=a({__name:"ColorPicker",props:{show:{type:Boolean,default:!1},showModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(a){const o=c(a,"show"),s=e("wheel"),d=e(),i=e(),u=e(),p=e(0),_=()=>{var e;"wheel"===m(s)&&m(i)?p.value=ee(ae(null==(e=m(d))?void 0:e.overlayContentRef,"--wheel-width")/(2*O),2):p.value=0};r(s,(()=>_()),{flush:"post"}),$((()=>{var e,a;null==(a=null==(e=m(d))?void 0:e.overlayContentRef)||a.style.setProperty("--canvas-size",`${O}px`),_()}));const h=t([0,H.hsl[1],H.hsl[2]]),b=(e,a=!0)=>{e=m(e);const o=oe("string"==typeof e?le(e):e,a?e=>X(e,2):e=>e);Object.assign(h,o)},S=n({get:()=>L(h),set(e){e!==m(S)&&T(e)&&b(e)}}),M=n((()=>L([h[0],H.hsl[1],H.hsl[2]]))),E=t({top:"0",left:"0",background:""}),q=n((()=>({background:`linear-gradient(0deg, #000, #0000), linear-gradient(90deg, #ffff, #fff0), ${m(M)}`}))),G=e({}),te=n((()=>"rect"===m(s)?{u:e=>{h[1]=J(e.x,0,100,0,H.hsl[1],2),h[2]=J(e.y,0,100,H.hsl[2],0,2)},m:()=>({top:H.hsl[2]-h[2]+"%",left:h[1]+"%",background:L(h)}),p:e=>{h[0]=X(e,2)},k:()=>({background:m(M)})}:"rounded"===m(s)?{u:e=>{const{deg:a,radius:o}=N(J(e.y,0,100,-1,1,4),J(e.x,0,100,-1,1,4));h[0]=Q(a+90,360),h[1]=J(o,0,1,0,H.hsl[1],2)},m:()=>{const{x:e,y:a}=K(h[1],h[0]-90,2);return{top:J(a,-H.hsl[1],H.hsl[1],0,100,1)+"%",left:J(e,-H.hsl[1],H.hsl[1],0,100,1)+"%",background:L(h)}},p:e=>{h[2]=X(e,2)},k:()=>({background:L([0,0,h[2]])})}:{u:e=>{const{deg:a}=N(J(e.y,0,100,-1,1,4),J(e.x,0,100,-1,1,4),2);h[0]=Q(a+90,360)},m:()=>{const{x:e,y:a}=K(50-m(p),h[0]-90);return{top:a+50+"%",left:e+50+"%",background:m(M)}},v:e=>{h[1]=J(e.x,0,100,0,H.hsl[1],2),h[2]=J(e.y,0,100,H.hsl[2],0,2)},k:()=>({left:J(h[1],0,H.hsl[1],0,100,2)+"%",top:J(h[2],0,H.hsl[2],100,0,2)+"%",background:m(S)})})),ne={};$((()=>{var e;const a=null==(e=m(i))?void 0:e.getContext("2d");if(!a)return;const o=a.createLinearGradient(0,0,O,0);o.addColorStop(0,"#fff"),o.addColorStop(1,"#fff0"),ne.h=o;const t=a.createLinearGradient(0,0,0,O);t.addColorStop(0,"#0000"),t.addColorStop(1,"#000"),ne.V=t;const n=a.createConicGradient(-Math.PI/2,O/2,O/2),s=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"];l(s,((e,a,o)=>n.addColorStop(o/(s.length-1),a))),ne.F=n}));const se=()=>{var e;const a=null==(e=m(i))?void 0:e.getContext("2d");a&&a.clearRect(0,0,O,O)},re=e=>{var a;const o=null==(a=m(i))?void 0:a.getContext("2d");o&&(o.fillStyle=m(e),o.fillRect(0,0,O,O))},ce=n((()=>{var e;const a=null==(e=m(i))?void 0:e.getContext("2d");if(a)return"rect"===m(s)?()=>{se(),re(M),re(ne.h),re(ne.V)}:"rounded"===m(s)?()=>{se(),re(ne.F),re("#000000"+J(h[2],0,H.hsl[2],255,0,0).toString(16));const e=O/2,o=a.createRadialGradient(e,e,0,e,e,e),l=L([0,0,h[2]]);o.addColorStop(0,l),o.addColorStop(1,l+"00"),re(o)}:(se(),re(ne.F),null)})),de=()=>{var e;Object.assign(E,m(te).m()),G.value=m(te).k(),null==(e=m(ce))||e()};r((()=>[m(s),h]),de,{deep:!0,flush:"post"}),$((()=>{de()}));const ie=Y((()=>{const e=e=>{m(te).u(e)},{start:a}=Z(i,{U:i,C:e,P:e});return a})),ue=Y((()=>{const e=e=>{m(te).v(e)},{start:a}=Z(u,{U:u,C:e,P:e});return a})),me=c(a,"modelValue");return W(m(me))||b(me,!1),r(h,(e=>{me.value=e}),{immediate:!0}),r(me,(e=>{b(e)}),{deep:!0}),(e,a)=>(x(),f(D,{ref_key:"dialogRef",ref:d,overlayProps:{contentClass:["color-picker",`color-picker--${s.value}`]},title:"Color Picker",modelValue:o.value,"onUpdate:modelValue":a[7]||(a[7]=e=>o.value=e)},{content:g((()=>[C("div",ve,[C("div",he,[a[0]||(k(-1),(a[0]=C("canvas",{ref_key:"canvasPickerRef",ref:i,width:m(O),height:m(O)},null,8,["width","height"])).cacheIndex=0,k(1),a[0]),"wheel"===s.value?(x(),y("div",ye)):V("",!0),C("div",{class:"color-picker__thumb",style:R(E),onPointerdown:a[1]||(a[1]=(...e)=>m(ie)&&m(ie)(...e))},null,36)]),"wheel"!==s.value?(x(),f(j,{key:0,showRange:!1,min:"0",max:"rect"===s.value?m(H).hsl[0]:m(H).hsl[2],trackerBackground:"rect"===s.value?"linear-gradient(to right, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)":"linear-gradient(to right, #000, #fff)",thumbBackground:G.value.background,"model-value":"rect"===s.value?h[0]:h[2],"onUpdate:modelValue":te.value.p},null,8,["max","trackerBackground","thumbBackground","model-value","onUpdate:modelValue"])):(x(),y("div",{key:1,ref_key:"secondPickerRef",ref:u,class:"color-picker__rect-picker",style:R(q.value)},[C("div",{class:"color-picker__thumb",rectPickerThumeStyle:"",style:R(G.value),onPointerdown:a[2]||(a[2]=(...e)=>m(ue)&&m(ue)(...e))},null,36)],4))]),C("div",be,[C("div",{class:"color-picker__preview",style:R({background:S.value})},null,4),C("label",ge,[a[8]||(a[8]=F(" Hex ")),I(C("input",{name:"color-piker-hex",maxlength:"7",size:"7","onUpdate:modelValue":a[3]||(a[3]=e=>S.value=e)},null,512),[[w,S.value,void 0,{lazy:!0}]])]),C("div",Ve,[(x(),y(U,null,B([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],o,l,t)=>{const n=[h[o]];if(t&&t.key===e&&P(t,n))return t;const s=(x(),y("label",{key:e},[F(z(a)+" ",1),I(C("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:m(H).hsb[o],step:"any","onUpdate:modelValue":e=>h[o]=e},null,8,xe),[[w,h[o],void 0,{lazy:!0}]])]));return s.memo=n,s}),a,4),64))]),C("div",we,[a[9]||(a[9]=F(" 樣式 ")),v(A,{items:["rect","rounded","wheel"],modelValue:s.value,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value=e)},null,8,["modelValue"])])])])),_:1},8,["overlayProps","modelValue"]))}}),Fe=["analogous","shades","tints","tones","triad","square","complement","split complement","tetradic1","tetradic2","tetradic3"],Ue=(e,a,o,t)=>l(t-1,(l=>(l.push(te(e,a)),a+=o,l)),[e]),Ce=e=>Ue(e,180,180,2),Pe=e=>Ue(e,150,60,3),Se=e=>Ue(e,120,120,3),Be=e=>Ue(e,90,90,4),Te=e=>[e,te(e,30),te(e,-30)],Me=e=>{const a=Ce(e);return a.push(...Ce(te(e,30))),a},Re=e=>{const a=Ce(e);return a.push(...Ce(te(e,60))),a},$e=e=>{const a=Ce(e);return a.push(te(e,30)),a.push(te(a[1],-30)),a},je=(e,a=6)=>{const[o,l,t]=e,n=t/a;return oe(a,((e,a)=>[o,l,t-a*n]))},ze=(e,a=6)=>{const[o,l,t]=e,n=l/a;return oe(a,((e,a)=>[o,l-a*n,t]))},Oe=(e,a=6)=>{const[o,l,t]=e,n=l/a,s=t/a;return oe(a,((e,a)=>[o,l-a*n,t-a*s]))},De=["aria-label","onClick"],He=["min","max"],G=a({__name:"HarmonyGenerator",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const o=c(a,"modelValue"),l=e(!1),d=s(),i=e([0,H.hsl[1],H.hsl[2]]),u=t({t:0,S:6}),p=n((()=>{const e=(e=>{const a=Fe.indexOf(e);return 0===a?Te:1===a?je:2===a?ze:3===a?Oe:4===a?Se:5===a?Be:6===a?Ce:7===a?Pe:8===a?Me:9===a?Re:$e})(Fe[u.t]);return oe(e([...m(i)],u.S),(e=>ne(se(e))))})),_=e(!0),P=()=>{d.B(m(_)?m(p):m(T))};r((()=>[m(_),m(p)]),P);const S=()=>{d.B(m(p)),M(),fe(o)},T=e([[]]),M=()=>{T.value=oe(d.T,(e=>e.M))};return r(o,(e=>{e?(M(),P()):d.B(m(T))}),{immediate:!0}),(e,a)=>(x(),f(D,{"overlay-props":{contentClass:m(q).genDialog},title:"調和調色盤",modelValue:o.value,"onUpdate:modelValue":a[10]||(a[10]=e=>o.value=e)},{actions:g((()=>[C("label",null,[I(C("input",{type:"checkbox",name:"preview","onUpdate:modelValue":a[8]||(a[8]=e=>_.value=e)},null,512),[[_e,_.value]]),a[14]||(a[14]=F(" 預覽 "))]),a[9]||(k(-1),(a[9]=v(de,{onClick:S,text:"確定"})).cacheIndex=9,k(1),a[9])])),default:g((()=>[re(p.value,(()=>(x(),y("div",{class:h(m(q).palette)},[v(ce,{location:"top",text:"Copied",openOnHover:!1,openOnClick:"",eager:!1},{activator:g((({handleClick:e})=>[(x(!0),y(U,null,B(p.value,((o,l)=>(x(),y("button",{key:l,type:"button",style:R({background:o}),"aria-label":`color ${o}`,onClick:a=>{var o;o=l,ke(m(p)[o]),e(a)}},a[11]||(a[11]=[C("div",{class:"btn__overlay"},null,-1)]),12,De)))),128))])),_:1})],2))),a,0),re([p.value[0]],(()=>v(de,{style:R({color:m(ie)(m(ue)(p.value[0]))>127?"#000":"#FFF",background:p.value[0]}),"prepend-icon":"eyedropper",text:"開啟color picker",onClick:a[1]||(a[1]=e=>l.value=!l.value)},null,8,["style"])),a,2),v(b,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value=e),show:l.value,"onUpdate:show":a[4]||(a[4]=e=>l.value=e)},null,8,["modelValue","show"]),C("div",null,[a[12]||(a[12]=F(" 調和方法 ")),v(A,{items:m(Fe),idx:u.t,"onUpdate:idx":a[5]||(a[5]=e=>u.t=e)},null,8,["items","idx"])]),1<=u.t&&u.t<=3?re([u],(()=>(x(),y("div",{key:0,class:h(m(q).numbers)},[a[13]||(a[13]=C("label",{for:"harmony-num"},"數量",-1)),I(C("input",{id:"harmony-num",name:"harmony-num",type:"number",min:m(pe),max:m(me),"onUpdate:modelValue":a[6]||(a[6]=e=>u.S=e)},null,8,He),[[w,u.S,void 0,{lazy:!0,number:!0}]])],2))),a,7):V("",!0)])),_:1},8,["overlay-props","modelValue"]))}});export{G as default};