import{d as a,f as p,r as l,w as f,X as $,h as x,Y as O,b as d,Z as R,c as r,V as H,$ as Z,a0 as J,a1 as N,a2 as Q,a3 as X,a4 as Y,L as I,N as ee,z,i as b,o as _,k as g,v as F,q as h,s as k,t as D,J as K,A as j,x as L,l as V,H as q,O as ae,a5 as oe,Q as le,I as B,a6 as te,F as S,y as G,a7 as ne,a8 as se,m as s,a9 as re,aa as ce,u as t,T as de,ab as ie,ac as ue,p as C,B as w,_ as P,ad as me,ae as pe,P as _e,af as fe,R as ke,ag as ve,S as he}from"./index-Wmeap9qK.js";import{_ as U}from"./VDialog.vue_vue_type_style_index_0_lang-BqZADGa7.js";const e={genDialog:"_genDialog_6a0eddf",palette:"_palette_4678db8",numbers:"_numbers_83c6648"},ye={class:"color-picker__pickers"},be={class:"color-picker__canvas"},ge={key:0,class:"color-picker__mask"},Ve={class:"color-picker__edits"},xe={class:"color-picker__hex-input"},we={class:"color-picker__hsb-inputs"},Fe=["name","max","onUpdate:modelValue"],Ue={class:"color-picker__variants"},A=a({__name:"ColorPicker",props:{show:{type:Boolean,default:!1},showModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(e){const a=p(e,"show"),o=l("wheel"),t=l(),n=l(),c=l(),i=l(0),u=()=>{var e;"wheel"===x(o)&&x(n)?i.value=ne(se(null==(e=x(t))?void 0:e.overlayContentRef,"--wheel-width")/(2*O),2):i.value=0};f(o,(()=>u()),{flush:"post"}),$((()=>{var e,a;null==(a=null==(e=x(t))?void 0:e.overlayContentRef)||a.style.setProperty("--canvas-size",`${O}px`),u()}));const m=d([0,R.hsl[1],R.hsl[2]]),v=(e,a=!0)=>{e=x(e);const o=s("string"==typeof e?re(e):e,a?e=>J(e,2):e=>e);Object.assign(m,o)},y=r({get:()=>Z(m),set(e){e!==x(y)&&H(e)&&v(e)}}),w=r((()=>Z([m[0],R.hsl[1],R.hsl[2]]))),C=d({top:"0",left:"0",background:""}),P=r((()=>({background:`linear-gradient(0deg, #000, #0000), linear-gradient(90deg, #ffff, #fff0), ${x(w)}`}))),T=l({}),M=r((()=>"rect"===x(o)?{p:e=>{m[1]=N(e.x,0,100,0,R.hsl[1],2),m[2]=N(e.y,0,100,R.hsl[2],0,2)},k:()=>({top:R.hsl[2]-m[2]+"%",left:m[1]+"%",background:Z(m)}),v:e=>{m[0]=J(e,2)},h:()=>({background:x(w)})}:"rounded"===x(o)?{p:e=>{const{deg:a,radius:o}=X(N(e.y,0,100,-1,1,4),N(e.x,0,100,-1,1,4));m[0]=Y(a+90,360),m[1]=N(o,0,1,0,R.hsl[1],2)},k:()=>{const{x:e,y:a}=Q(m[1],m[0]-90,2);return{top:N(a,-R.hsl[1],R.hsl[1],0,100,1)+"%",left:N(e,-R.hsl[1],R.hsl[1],0,100,1)+"%",background:Z(m)}},v:e=>{m[2]=J(e,2)},h:()=>({background:Z([0,0,m[2]])})}:{p:e=>{const{deg:a}=X(N(e.y,0,100,-1,1,4),N(e.x,0,100,-1,1,4),2);m[0]=Y(a+90,360)},k:()=>{const{x:e,y:a}=Q(50-x(i),m[0]-90);return{top:a+50+"%",left:e+50+"%",background:x(w)}},V:e=>{m[1]=N(e.x,0,100,0,R.hsl[1],2),m[2]=N(e.y,0,100,R.hsl[2],0,2)},h:()=>({left:N(m[1],0,R.hsl[1],0,100,2)+"%",top:N(m[2],0,R.hsl[2],100,0,2)+"%",background:x(y)})})),A={};$((()=>{var e;const a=null==(e=x(n))?void 0:e.getContext("2d");if(!a)return;const o=a.createLinearGradient(0,0,O,0);o.addColorStop(0,"#fff"),o.addColorStop(1,"#fff0"),A.F=o;const l=a.createLinearGradient(0,0,0,O);l.addColorStop(0,"#0000"),l.addColorStop(1,"#000"),A.U=l;const t=a.createConicGradient(-Math.PI/2,O/2,O/2),s=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"];I(s,((e,a,o)=>t.addColorStop(o/(s.length-1),a))),A.C=t}));const E=()=>{var e;const a=null==(e=x(n))?void 0:e.getContext("2d");a&&a.clearRect(0,0,O,O)},W=e=>{var a;const o=null==(a=x(n))?void 0:a.getContext("2d");o&&(o.fillStyle=x(e),o.fillRect(0,0,O,O))},ce=r((()=>{var e;const a=null==(e=x(n))?void 0:e.getContext("2d");if(a)return"rect"===x(o)?()=>{E(),W(w),W(A.F),W(A.U)}:"rounded"===x(o)?()=>{E(),W(A.C),W("#000000"+N(m[2],0,R.hsl[2],255,0,0).toString(16));const e=O/2,o=a.createRadialGradient(e,e,0,e,e,e),l=Z([0,0,m[2]]);o.addColorStop(0,l),o.addColorStop(1,l+"00"),W(o)}:(E(),W(A.C),null)})),de=()=>{var e;Object.assign(C,x(M).k()),T.value=x(M).h(),null==(e=x(ce))||e()};f((()=>[x(o),m]),de,{deep:!0,flush:"post"}),$((()=>{de()}));const ie=(()=>{const e=e=>{x(M).p(e)},{start:a}=ee(n,{P:n,S:e,B:e});return a})(),ue=(()=>{const e=e=>{x(M).V(e)},{start:a}=ee(c,{P:c,S:e,B:e});return a})(),me=p(e,"modelValue");return z(x(me))||v(me,!1),f(m,(e=>{me.value=e}),{immediate:!0}),f(me,(e=>{v(e)}),{deep:!0}),(e,l)=>(_(),b(U,{ref_key:"dialogRef",ref:t,overlayProps:{contentClass:["color-picker",`color-picker--${o.value}`]},title:"Color Picker",modelValue:a.value,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value=e)},{content:g((()=>[F("div",ye,[F("div",be,[l[0]||(D(-1),(l[0]=F("canvas",{ref_key:"canvasPickerRef",ref:n,width:x(O),height:x(O)},null,8,["width","height"])).cacheIndex=0,D(1),l[0]),"wheel"===o.value?(_(),h("div",ge)):k("",!0),F("div",{class:"color-picker__thumb",style:K(C),onPointerdown:l[1]||(l[1]=(...e)=>x(ie)&&x(ie)(...e))},null,36)]),"wheel"!==o.value?(_(),b(j,{key:0,showRange:!1,min:"0",max:"rect"===o.value?x(R).hsl[0]:x(R).hsl[2],trackerBackground:"rect"===o.value?"linear-gradient(to right, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)":"linear-gradient(to right, #000, #fff)",thumbBackground:T.value.background,"model-value":"rect"===o.value?m[0]:m[2],"onUpdate:modelValue":M.value.v},null,8,["max","trackerBackground","thumbBackground","model-value","onUpdate:modelValue"])):(_(),h("div",{key:1,ref_key:"secondPickerRef",ref:c,class:"color-picker__rect-picker",style:K(P.value)},[F("div",{class:"color-picker__thumb",rectPickerThumeStyle:"",style:K(T.value),onPointerdown:l[2]||(l[2]=(...e)=>x(ue)&&x(ue)(...e))},null,36)],4))]),F("div",Ve,[F("div",{class:"color-picker__preview",style:K({background:y.value})},null,4),F("label",xe,[l[8]||(l[8]=L(" Hex ")),V(q,{modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=e=>y.value=e),modelModifiers:{lazy:!0},name:"color-piker-hex"},null,8,["modelValue"])]),F("div",we,[(_(),h(S,null,ae([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],o,l,t)=>{const n=[m[o]];if(t&&t.key===e&&oe(t,n))return t;const s=(_(),h("label",{key:e},[L(B(a)+" ",1),le(F("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:x(R).hsb[o],step:"any","onUpdate:modelValue":e=>m[o]=e},null,8,Fe),[[te,m[o],void 0,{lazy:!0}]])]));return s.memo=n,s}),l,4),64))]),F("div",Ue,[l[9]||(l[9]=L(" 樣式 ")),V(G,{items:["rect","rounded","wheel"],modelValue:o.value,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value=e)},null,8,["modelValue"])])])])),_:1},8,["overlayProps","modelValue"]))}}),Ce=["analogous","shades","tints","tones","triad","square","complement","split complement","tetradic1","tetradic2","tetradic3"],Pe=(e,a,o,l)=>I(l-1,(l=>(l.push(ce(e,a)),a+=o,l)),[e]),Se=e=>Pe(e,180,180,2),Be=e=>Pe(e,150,60,3),Te=e=>Pe(e,120,120,3),Me=e=>Pe(e,90,90,4),$e=e=>[e,ce(e,30),ce(e,-30)],ze=e=>{const a=Se(e);return a.push(...Se(ce(e,30))),a},Oe=e=>{const a=Se(e);return a.push(...Se(ce(e,60))),a},Re=e=>{const a=Se(e);return a.push(ce(e,30)),a.push(ce(a[1],-30)),a},je=(e,a=6)=>{const[o,l,t]=e,n=t/a;return s(a,((e,a)=>[o,l,t-a*n]))},qe=(e,a=6)=>{const[o,l,t]=e,n=l/a;return s(a,((e,a)=>[o,l-a*n,t]))},De=(e,a=6)=>{const[o,l,t]=e,n=l/a,r=t/a;return s(a,((e,a)=>[o,l-a*n,t-a*r]))},He=["aria-label","onClick"],Ae=["min","max"],E=a({__name:"HarmonyGenerator",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const o=p(a,"modelValue"),n=l(!1),c=t(),i=l([0,R.hsl[1],R.hsl[2]]),u=d({l:0,T:6}),m=r((()=>{const e=(e=>{const a=Ce.indexOf(e);return 0===a?$e:1===a?je:2===a?qe:3===a?De:4===a?Te:5===a?Me:6===a?Se:7===a?Be:8===a?ze:9===a?Oe:Re})(Ce[u.l]);return s(e([...x(i)],u.T),(e=>de(ie(e))))})),v=l(!0),y=()=>{c.M(x(v)?x(m):x(T))};f((()=>[x(v),x(m)]),y);const B=()=>{c.M(x(m)),M(),he(o)},T=l([[]]),M=()=>{T.value=s(c.$,(e=>e.O))};return f(o,(e=>{e?(M(),y()):c.M(x(T))}),{immediate:!0}),(a,l)=>(_(),b(U,{"overlay-props":{contentClass:x(e).genDialog},title:"調和調色盤",modelValue:o.value,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value=e)},{actions:g((()=>[F("label",null,[le(F("input",{type:"checkbox",name:"preview","onUpdate:modelValue":l[8]||(l[8]=e=>v.value=e)},null,512),[[ke,v.value]]),l[14]||(l[14]=L(" 預覽 "))]),l[9]||(D(-1),(l[9]=V(P,{onClick:B,text:"確定"})).cacheIndex=9,D(1),l[9])])),default:g((()=>[ue(m.value,(()=>(_(),h("div",{class:C(x(e).palette)},[V(w,{location:"top",text:"Copied",openOnHover:!1,openOnClick:"",eager:!1},{activator:g((({handleClick:e})=>[(_(!0),h(S,null,ae(m.value,((a,o)=>(_(),h("button",{key:o,type:"button",style:K({background:a}),"aria-label":`color ${a}`,onClick:a=>{var l;l=o,ve(x(m)[l]),e(a)}},l[11]||(l[11]=[F("div",{class:"btn__overlay"},null,-1)]),12,He)))),128))])),_:1})],2))),l,0),ue([m.value[0]],(()=>V(P,{style:K({color:x(me)(x(pe)(m.value[0]))>127?"#000":"#FFF",background:m.value[0]}),"prepend-icon":"eyedropper",text:"開啟color picker",onClick:l[1]||(l[1]=e=>n.value=!n.value)},null,8,["style"])),l,2),V(A,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),show:n.value,"onUpdate:show":l[4]||(l[4]=e=>n.value=e)},null,8,["modelValue","show"]),F("div",null,[l[12]||(l[12]=L(" 調和方法 ")),V(G,{items:x(Ce),idx:u.l,"onUpdate:idx":l[5]||(l[5]=e=>u.l=e)},null,8,["items","idx"])]),1<=u.l&&u.l<=3?ue([u],(()=>(_(),h("div",{key:0,class:C(x(e).numbers)},[l[13]||(l[13]=F("label",{for:"harmony-num"},"數量",-1)),le(F("input",{id:"harmony-num",name:"harmony-num",type:"number",min:x(fe),max:x(_e),"onUpdate:modelValue":l[6]||(l[6]=e=>u.T=e)},null,8,Ae),[[te,u.T,void 0,{lazy:!0,number:!0}]])],2))),l,7):k("",!0)])),_:1},8,["overlay-props","modelValue"]))}});export{E as default};