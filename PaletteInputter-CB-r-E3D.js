import{d as a,f as p,r as t,u as l,N as ee,c as r,h as x,w as f,m as s,i as _,o as b,k as g,v as D,p as C,q as h,F as S,O as ae,J as W,l as V,s as k,_ as A,I as M,H as U,D as j,P as _e,t as L,Q as le,x as F,R as ke,S as he,T as de,U as Yc,V as H,z,W as Sa}from"./index-CgRP0aAY.js";import{_ as P}from"./VDialog.vue_vue_type_style_index_0_lang-q8LPErt_.js";const e={paletteInputer:"_paletteInputer_1886b6e",palette:"_palette_7ff3ac0",color:"_color_4b3eb95"},De=["for"],Ee=["onUpdate:modelValue"],R=a({__name:"PaletteInputter",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const o=p(a,"modelValue"),n=t(!0),d=l(),u=t([]),i=t([]),c=t(),m=t({top:0,zIndex:1}),v=t(null),y=t(null),{start:w}=(()=>{let e=null,l=null;const a=e=>Sa(Math.floor(e.y/100*x(i).length),0,x(i).length-1),o=l=>{z(e)||(m.value.top=l.y-e+"%")};return ee(c,{C:c,ue:!1,S:t=>{v.value=a(t),l=100/x(i).length,e=l*(x(v)+.5),o(t)},T:l=>{z(v)||z(e)||(o(l),y.value=a(l))},fe:()=>{if(!z(v)){if(x(v)!==y.value&&!z(y.value)){const e=x(i).splice(x(v),1)[0];x(i).splice(y.value,0,e)}v.value=null,y.value=null,m.value.top=0}}})})(),I=r((()=>({top:x(y)>x(v)?"100%":0}))),E=()=>{d.M(x(n)?x(i):x(u))},R=()=>{d.M(x(i)),$(),he(o)},$=()=>{u.value=s(d.R,(e=>e.jt))};f((()=>[x(n),x(i)]),E,{deep:!0}),f(o,(e=>{e?(i.value=s(d.R,(e=>e.jt)),$(),E()):d.M(x(u))}),{immediate:!0});const q=()=>{x(i).push(de(Yc()))};return(l,a)=>(b(),_(P,{overlayProps:{contentClass:x(e).paletteInputer},title:"輸入調色盤",modelValue:o.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value=e)},{actions:g((()=>[V(A,{"prepend-icon":"plus",text:"新增",disabled:i.value.length===x(_e),onClick:q},null,8,["disabled"]),a[1]||(L(-1),(a[1]=D("div",{class:"spacer"})).cacheIndex=1,L(1),a[1]),a[2]||(L(-1),(a[2]=D("label",null,[le(D("input",{type:"checkbox",name:"preview","onUpdate:modelValue":e=>n.value=e},null,8,Ee),[[ke,n.value]]),a[5]||(a[5]=F(" 預覽 "))])).cacheIndex=2,L(1),a[2]),a[3]||(L(-1),(a[3]=V(A,{text:"確定",onClick:R})).cacheIndex=3,L(1),a[3])])),default:g((()=>[D("div",{ref_key:"contentRef",ref:c,class:C(x(e).palette)},[(b(!0),h(S,null,ae(i.value,((l,o)=>(b(),h("div",{key:o,class:C(x(e).color),style:W(o===v.value&&m.value)},[V(A,{icon:"list",onPointerdown:a[0]||(a[0]=e=>x(w)(e))}),D("label",{for:`color${o+1}`,style:W({background:l,color:l})},M(`color${o+1}`),13,De),V(U,{id:`color${o+1}`,modelValue:i.value[o],"onUpdate:modelValue":e=>i.value[o]=e,onPaste:e=>((e,l)=>{var a;const o=(null==(a=e.clipboardData)?void 0:a.getData("text"))??"",t=[];for(const e of o.split("-"))H(e)&&t.push(e.startsWith("#")?e:"#"+e);do{x(i).splice(l++,1,t.shift())}while(l<_e&&t.length);l<x(i).length&&x(i).splice(l,x(i).length-l)})(e,o)},null,8,["id","modelValue","onUpdate:modelValue","onPaste"]),i.value.length>2?(b(),_(A,{key:0,icon:"x-lg","aria-label":"移除",onClick:e=>{return l=o,void x(i).splice(l,1);var l}},null,8,["onClick"])):k("",!0),o!==v.value&&o===y.value?(b(),_(j,{key:1,style:W(I.value),icon:"arrow-left"},null,8,["style"])):k("",!0)],6)))),128))],2)])),_:1},8,["overlayProps","modelValue"]))}});export{R as default};