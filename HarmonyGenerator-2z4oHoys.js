import{d as a,f as m,r as l,w as c,V as T,h as f,W as B,b as d,c as r,T as $,X as O,Y as R,Z as H,$ as E,a0 as X,a1 as Q,K as I,L as Y,z,i as v,o as x,k as _,v as k,q as A,s as C,t as h,I as W,A as S,x as D,l as y,G as U,M as Z,a2 as J,O as ee,H as P,a3 as ae,F as L,y as j,a4 as le,a5 as oe,m as o,a6 as ne,u as t,R as te,a7 as se,a8 as re,p as V,C as G,_ as K,a9 as de,aa as ce,N as ie,ab as ue,P as me,ac as pe,Q as _e}from"./index-89X3PfNb.js";import{_ as F}from"./VDialog.vue_vue_type_style_index_0_lang-DSmfNzaV.js";const e={genDialog:"_genDialog_6a0eddf",palette:"_palette_4678db8",numbers:"_numbers_83c6648"},fe={class:"color-picker__pickers"},ke={class:"color-picker__canvas"},ve={key:0,class:"color-picker__mask"},ye={class:"color-picker__edits"},he={class:"color-picker__hex-input"},be={class:"color-picker__hsb-inputs"},ge=["name","onUpdate:modelValue"],Ve={class:"color-picker__variants"},g=a({__name:"ColorPicker",props:{show:{type:Boolean,default:!1},showModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(e){const a=m(e,"show"),n=l("wheel"),t=l(),s=l(),i=l(),u=l(0),p=()=>{var e;"wheel"===f(n)&&f(s)?u.value=le(oe(null==(e=f(t))?void 0:e.overlayContentRef,"--wheel-width")/(2*B),2):u.value=0};c(n,(()=>p()),{flush:"post"}),T((()=>{var e,a;null==(a=null==(e=f(t))?void 0:e.overlayContentRef)||a.style.setProperty("--canvas-size",`${B}px`),p()}));const b=d([0,100,100]),g=(e,a=!0)=>{e=f(e);const l=o("string"==typeof e?ne(e):e,a?e=>R(e,2):e=>e);Object.assign(b,l)},V=r({get:()=>O(b),set(e){e!==f(V)&&$(e)&&g(e)}}),w=r((()=>O([b[0],100,100]))),M=d({top:"0",left:"0",background:""}),N=r((()=>({background:`linear-gradient(0deg, #000, #0000), linear-gradient(90deg, #ffff, #fff0), ${f(w)}`}))),G=l({}),q=r((()=>"rect"===f(n)?{p:e=>{b[1]=R(e.x,2),b[2]=R(100-e.y,2)},k:()=>({top:100-b[2]+"%",left:b[1]+"%",background:O(b)}),v:e=>{b[0]=R(e,2)},h:()=>({background:f(w)})}:"rounded"===f(n)?{p:e=>{const{deg:a,radius:l}=X(E(e.y,0,100,-1,1,4),E(e.x,0,100,-1,1,4));b[0]=Q(a+90,360),b[1]=E(l,0,1,0,100,2)},k:()=>{const{x:e,y:a}=H(b[1],b[0]-90,2);return{top:E(a,-100,100,0,100,1)+"%",left:E(e,-100,100,0,100,1)+"%",background:O(b)}},v:e=>{b[2]=R(e,2)},h:()=>({background:O([0,0,b[2]])})}:{p:e=>{const{deg:a}=X(E(e.y,0,100,-1,1,4),E(e.x,0,100,-1,1,4),2);b[0]=Q(a+90,360)},k:()=>{const{x:e,y:a}=H(50-f(u),b[0]-90);return{top:a+50+"%",left:e+50+"%",background:f(w)}},V:e=>{b[1]=R(e.x,2),b[2]=R(100-e.y,2)},h:()=>({left:R(b[1],2)+"%",top:R(100-b[2],2)+"%",background:f(V)})})),K={};T((()=>{var e;const a=null==(e=f(s))?void 0:e.getContext("2d");if(!a)return;const l=a.createLinearGradient(0,0,B,0);l.addColorStop(0,"#fff"),l.addColorStop(1,"#fff0"),K.F=l;const o=a.createLinearGradient(0,0,0,B);o.addColorStop(0,"#0000"),o.addColorStop(1,"#000"),K.U=o;const n=a.createConicGradient(-Math.PI/2,B/2,B/2),t=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"];I(t,((e,a,l)=>n.addColorStop(l/(t.length-1),a))),K.C=n}));const te=()=>{var e;const a=null==(e=f(s))?void 0:e.getContext("2d");a&&a.clearRect(0,0,B,B)},se=e=>{var a;const l=null==(a=f(s))?void 0:a.getContext("2d");l&&(l.fillStyle=f(e),l.fillRect(0,0,B,B))},re=r((()=>{var e;const a=null==(e=f(s))?void 0:e.getContext("2d");if(a)return"rect"===f(n)?()=>{te(),se(w),se(K.F),se(K.U)}:"rounded"===f(n)?()=>{te(),se(K.C),se("#000000"+E(b[2],0,100,255,0,0).toString(16));const e=B/2,l=a.createRadialGradient(e,e,0,e,e,e),o=O([0,0,b[2]]);l.addColorStop(0,o),l.addColorStop(1,o+"00"),se(l)}:(te(),se(K.C),null)})),de=()=>{var e;Object.assign(M,f(q).k()),G.value=f(q).h(),null==(e=f(re))||e()};c((()=>[f(n),b]),de,{deep:!0,flush:"post"}),T((()=>{de()}));const ce=(()=>{const e=e=>{f(q).p(e)},{start:a}=Y(s,{P:s,S:e,M:e});return a})(),ie=(()=>{const e=e=>{f(q).V(e)},{start:a}=Y(i,{P:i,S:e,M:e});return a})(),ue=m(e,"modelValue");return z(f(ue))||g(ue,!1),c(b,(e=>{ue.value=e}),{immediate:!0}),c(ue,(e=>{g(e)}),{deep:!0}),(e,l)=>(x(),v(F,{ref_key:"dialogRef",ref:t,overlayProps:{contentClass:["color-picker",`color-picker--${n.value}`]},title:"Color Picker",modelValue:a.value,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value=e)},{content:_((()=>[k("div",fe,[k("div",ke,[l[0]||(h(-1),(l[0]=k("canvas",{ref_key:"canvasPickerRef",ref:s,width:f(B),height:f(B)},null,8,["width","height"])).cacheIndex=0,h(1),l[0]),"wheel"===n.value?(x(),A("div",ve)):C("",!0),k("div",{class:"color-picker__thumb",style:W(M),onPointerdown:l[1]||(l[1]=(...e)=>f(ce)&&f(ce)(...e))},null,36)]),"wheel"!==n.value?(x(),v(S,{key:0,showRange:!1,min:"0",max:"rect"===n.value?360:100,trackerBackground:"rect"===n.value?"linear-gradient(to right, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)":"linear-gradient(to right, #000, #fff)",thumbBackground:G.value.background,"model-value":"rect"===n.value?b[0]:b[2],"onUpdate:modelValue":q.value.v},null,8,["max","trackerBackground","thumbBackground","model-value","onUpdate:modelValue"])):(x(),A("div",{key:1,ref_key:"secondPickerRef",ref:i,class:"color-picker__rect-picker",style:W(N.value)},[k("div",{class:"color-picker__thumb",rectPickerThumeStyle:"",style:W(G.value),onPointerdown:l[2]||(l[2]=(...e)=>f(ie)&&f(ie)(...e))},null,36)],4))]),k("div",ye,[k("div",{class:"color-picker__preview",style:W({background:V.value})},null,4),k("label",he,[l[8]||(l[8]=D(" Hex ")),y(U,{modelValue:V.value,"onUpdate:modelValue":l[3]||(l[3]=e=>V.value=e),modelModifiers:{lazy:!0},name:"color-piker-hex"},null,8,["modelValue"])]),k("div",be,[(x(),A(L,null,Z([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],l,o,n)=>{const t=[b[l]];if(n&&n.key===e&&J(n,t))return n;const s=(x(),A("label",{key:e},[D(P(a)+" ",1),ee(k("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:"100",step:"any","onUpdate:modelValue":e=>b[l]=e},null,8,ge),[[ae,b[l],void 0,{lazy:!0}]])]));return s.memo=t,s}),l,4),64))]),k("div",Ve,[l[9]||(l[9]=D(" 樣式 ")),y(j,{items:["rect","rounded","wheel"],modelValue:n.value,"onUpdate:modelValue":l[6]||(l[6]=e=>n.value=e)},null,8,["modelValue"])])])])),_:1},8,["overlayProps","modelValue"]))}}),we=["aria-label","onClick"],xe=["min","max"],N=a({__name:"HarmonyGenerator",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const n=m(a,"modelValue"),s=l(!1),i=t(),u=l([0,100,100]),p=d({l:3,T:6}),b=r((()=>o(se(f(u),p.l,p.T),(e=>te(e))))),w=l(!0),U=()=>{i.B(f(w)?f(b):f(S))};c((()=>[f(w),f(b)]),U);const P=()=>{i.B(f(b)),M(),_e(n)},S=l([[]]),M=()=>{S.value=o(i.$,(e=>e.O))};return c(n,(e=>{e?(M(),U()):i.B(f(S))}),{immediate:!0}),(a,l)=>(x(),v(F,{"overlay-props":{contentClass:f(e).genDialog},title:"調和調色盤",modelValue:n.value,"onUpdate:modelValue":l[10]||(l[10]=e=>n.value=e)},{actions:_((()=>[k("label",null,[ee(k("input",{type:"checkbox",name:"preview","onUpdate:modelValue":l[8]||(l[8]=e=>w.value=e)},null,512),[[me,w.value]]),l[14]||(l[14]=D(" 預覽 "))]),l[9]||(h(-1),(l[9]=y(K,{onClick:P,text:"確定"})).cacheIndex=9,h(1),l[9])])),default:_((()=>[re(b.value,(()=>(x(),A("div",{class:V(f(e).palette)},[y(G,{location:"top",text:"Copied",openOnHover:!1,openOnClick:"",eager:!1},{activator:_((({handleClick:e})=>[(x(!0),A(L,null,Z(b.value,((a,o)=>(x(),A("button",{key:o,type:"button",style:W({background:a}),"aria-label":`color ${a}`,onClick:a=>{var l;l=o,pe(f(b)[l]),e(a)}},l[11]||(l[11]=[k("div",{class:"btn__overlay"},null,-1)]),12,we)))),128))])),_:1})],2))),l,0),re([b.value[0]],(()=>y(K,{style:W({color:f(de)(b.value[0])?"#000":"#FFF",background:b.value[0]}),"prepend-icon":"eyedropper",text:"開啟color picker",onClick:l[1]||(l[1]=e=>s.value=!s.value)},null,8,["style"])),l,2),y(g,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),show:s.value,"onUpdate:show":l[4]||(l[4]=e=>s.value=e)},null,8,["modelValue","show"]),k("div",null,[l[12]||(l[12]=D(" 調和方法 ")),y(j,{items:f(ce),idx:p.l,"onUpdate:idx":l[5]||(l[5]=e=>p.l=e)},null,8,["items","idx"])]),p.l<3?re([p],(()=>(x(),A("div",{key:0,class:V(f(e).numbers)},[l[13]||(l[13]=k("label",{for:"harmony-num"},"數量",-1)),ee(k("input",{id:"harmony-num",name:"harmony-num",type:"number",min:f(ue),max:f(ie),"onUpdate:modelValue":l[6]||(l[6]=e=>p.T=e)},null,8,xe),[[ae,p.T,void 0,{lazy:!0,number:!0}]])],2))),l,7):C("",!0)])),_:1},8,["overlay-props","modelValue"]))}});export{N as default};