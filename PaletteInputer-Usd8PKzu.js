import{d as a,e as c,r as e,u as s,K as N,w as r,b as m,L as oe,h as f,o as x,j as g,q as k,l as h,m as y,F as U,D as M,H as S,k as b,p as V,_ as v,B,z as I,N as F,O as me,s as C,y as z,t as D,P as _e,Q as fe,J as A,R as ne,S as lc,T as wc,U as bc,V as W,W as ka}from"./index-C9bz2lB4.js";import{_ as j}from"./VDialog.vue_vue_type_style_index_0_lang-Clt_uVCS.js";const E={paletteInputer:"_paletteInputer_6f61c2f",palette:"_palette_b9e91ad",color:"_color_f1c9a85"},De=["for"],He=["id","value","onChange","onKeydown"],ye=["onUpdate:modelValue"],J=a({__name:"PaletteInputer",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(a){const l=c(a,"modelValue"),o=e(!0),n=s(),t=e([]),i=e([]),u=e(),d=e({top:0,zIndex:1}),p=e(null),_=e(null),{start:w}=(()=>{let e=null,a=null;const l=e=>ka(Math.floor(e.y/100*m(i).length),0,m(i).length-1),o=a=>{W(e)||(d.value.top=a.y-e+"%")};return N(u,{F:u,re:!1,U:n=>{p.value=l(n),a=100/m(i).length,e=a*(m(p)+.5),o(n)},P:a=>{W(p)||W(e)||(o(a),_.value=l(a))},ie:()=>{if(!W(p)){if(m(p)!==_.value&&!W(_.value)){const e=m(i).splice(m(p),1)[0];m(i).splice(_.value,0,e)}p.value=null,_.value=null,d.value.top=0}}})})(),P=()=>{n.B(m(o)?m(i):m(t))},K=()=>{n.B(m(i)),$(),fe(l)},$=()=>{t.value=oe(n.T,(e=>e.yt))};r((()=>[m(o),m(i)]),P,{deep:!0}),r(l,(e=>{e?(i.value=oe(n.T,(e=>e.yt)),$(),P()):n.B(m(t))}),{immediate:!0});const R=()=>{m(i).push(ne(lc()))};return(e,a)=>(x(),f(j,{overlayProps:{contentClass:m(E).paletteInputer},title:"輸入調色盤",modelValue:l.value,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value=e)},{actions:g((()=>[b(v,{"prepend-icon":"plus",text:"新增",disabled:i.value.length===m(me),onClick:R},null,8,["disabled"]),a[2]||(C(-1),(a[2]=k("div",{class:"spacer"})).cacheIndex=2,C(1),a[2]),a[3]||(C(-1),(a[3]=k("label",null,[z(k("input",{type:"checkbox",name:"preview","onUpdate:modelValue":e=>o.value=e},null,8,ye),[[_e,o.value]]),a[6]||(a[6]=D(" 預覽 "))])).cacheIndex=3,C(1),a[3]),a[4]||(C(-1),(a[4]=b(v,{text:"確定",onClick:K})).cacheIndex=4,C(1),a[4])])),default:g((()=>[k("div",{ref_key:"contentRef",ref:u,class:h(m(E).palette)},[(x(!0),y(U,null,M(i.value,((e,l)=>(x(),y("div",{key:l,class:h(m(E).color),style:S(l===p.value&&d.value)},[b(v,{icon:"list",onPointerdown:a[0]||(a[0]=e=>m(w)(e))}),k("label",{for:`color${l+1}`,style:S({background:e,color:e})},B(`color${l+1}`),13,De),k("input",{id:`color${l+1}`,maxlength:"7",size:"7",value:e,onInput:a[1]||(a[1]=e=>m(I)(e)),onChange:e=>function(e,a){const l=e.currentTarget.value;l!==m(i)[a]&&A(l)&&(m(i)[a]=l)}(e,l),onKeydown:e=>(async(e,a)=>{if(wc(e)&&"v"===e.key.toLowerCase()){const e=await bc();if(e){const l=[];for(const a of e.split("-"))A(a)&&l.push(a.startsWith("#")?a:"#"+a);do{m(i).splice(a++,1,l.shift())}while(a<me&&l.length);a<m(i).length&&m(i).splice(a,m(i).length-a)}}})(e,l)},null,40,He),i.value.length>2?(x(),f(v,{key:0,icon:"x-lg","aria-label":"移除",onClick:e=>{return a=l,void m(i).splice(a,1);var a}},null,8,["onClick"])):V("",!0),l!==p.value&&l===_.value?(x(),f(F,{key:1,type:"arrow-left"})):V("",!0)],6)))),128))],2)])),_:1},8,["overlayProps","modelValue"]))}});export{J as default};