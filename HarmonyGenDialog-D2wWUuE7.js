import{d as e,u as a,r as l,w as o,J as n,K as s,L as t,N as r,O as c,C as d,P as i,c as u,Q as m,R as p,S as k,T as f,U as _,V as h,b as v,A as y,e as g,o as b,z as V,f as x,g as w,i as F,l as U,s as C,k as S,W as P,x as T,v as B,X as M,j as z,F as O,h as R,Y as $,Z as j,$ as D,m as H,a0 as E,a1 as A,t as G,a as J,a2 as K,a3 as L,D as N,a4 as Q,n as W,_ as X,a5 as Y,a6 as Z,a7 as q,a8 as I,M as ee,a9 as ae,y as le,aa as oe,B as ne}from"./index-DRywzBJR.js";const se={genDialog:"_genDialog_65e200d",header:"_header_06aa7c6",content:"_content_c31aea8",palette:"_palette_d1f9ea3",numbers:"_numbers_2d4456c",buttons:"_buttons_f7cb10c"},te={class:"color-picker__pickers"},re={class:"color-picker__canvas"},ce={key:0,class:"color-picker__mask"},de={class:"color-picker__edits"},ie={class:"color-picker__hex-input"},ue={class:"color-picker__hsb-inputs"},me=["name","max","onUpdate:modelValue"],pe={class:"color-picker__variants"},ke=e({__name:"ColorPicker",props:{show:{type:Boolean,default:!1},showModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:show","update:modelValue"],setup(e){const J=a(e,"show"),K=l("wheel"),L=l(),N=l(),Q=l(),W=l(0),X=()=>{var e;"wheel"===u(K)&&N.value?W.value=j(D(null==(e=L.value)?void 0:e.contentRef,"--wheel-width")/(2*s),2):W.value=0};o(K,(()=>X()),{flush:"post"}),n((()=>{L.value.contentRef.style.setProperty("--canvas-size",`${s}px`),X()}));const Y=t([0,r[1],r[2]]),Z=(e,a=!0)=>{e=u(e);const l=H("string"==typeof e?E(e):e,a?e=>m(e,2):e=>e);Object.assign(Y,l)},q=c({get:()=>i(Y),set(e){e!==q.value&&d(e)&&Z(e)}}),I=c((()=>i([Y[0],r[1],r[2]]))),ee=t({top:"0",left:"0",background:""}),ae=c((()=>({background:`linear-gradient(0deg, #000, #0000), linear-gradient(90deg, #ffff, #fff0), ${I.value}`}))),le=l({}),oe=c((()=>"rect"===u(K)?{l:e=>{Y[1]=p(e.x,0,100,0,r[1],2),Y[2]=p(e.y,0,100,r[2],0,2)},o:()=>({top:r[2]-Y[2]+"%",left:Y[1]+"%",background:i(Y)}),t:e=>{Y[0]=m(e,2)},i:()=>({background:I.value})}:"rounded"===u(K)?{l:e=>{const{deg:a,radius:l}=f(p(e.y,0,100,-1,1,4),p(e.x,0,100,-1,1,4));Y[0]=_(a+90,360),Y[1]=p(l,0,1,0,r[1],2)},o:()=>{const{x:e,y:a}=k(Y[1],Y[0]-90,2);return{top:p(a,-r[1],r[1],0,100,1)+"%",left:p(e,-r[1],r[1],0,100,1)+"%",background:i(Y)}},t:e=>{Y[2]=m(e,2)},i:()=>({background:i([0,0,Y[2]])})}:{l:e=>{const{deg:a}=f(p(e.y,0,100,-1,1,4),p(e.x,0,100,-1,1,4),2);Y[0]=_(a+90,360)},o:()=>{const{x:e,y:a}=k(50-W.value,Y[0]-90);return{top:a+50+"%",left:e+50+"%",background:I.value}},u:e=>{Y[1]=p(e.x,0,100,0,r[1],2),Y[2]=p(e.y,0,100,r[2],0,2)},i:()=>({left:p(Y[1],0,r[1],0,100,2)+"%",top:p(Y[2],0,r[2],100,0,2)+"%",background:q.value})})),ne={};n((()=>{var e;const a=null==(e=N.value)?void 0:e.getContext("2d");if(!a)return;const l=a.createLinearGradient(0,0,s,0);l.addColorStop(0,"#fff"),l.addColorStop(1,"#fff0"),ne.m=l;const o=a.createLinearGradient(0,0,0,s);o.addColorStop(0,"#0000"),o.addColorStop(1,"#000"),ne.p=o;const n=a.createConicGradient(-Math.PI/2,s/2,s/2),t=["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"];t.forEach(((e,a)=>n.addColorStop(a/(t.length-1),e))),ne.k=n}));const se=()=>{var e;const a=null==(e=N.value)?void 0:e.getContext("2d");a&&a.clearRect(0,0,s,s)},ke=e=>{var a;const l=null==(a=N.value)?void 0:a.getContext("2d");l&&(l.fillStyle=u(e),l.fillRect(0,0,s,s))},fe=c((()=>{var e;const a=null==(e=N.value)?void 0:e.getContext("2d");if(a)return"rect"===u(K)?()=>{se(),ke(I),ke(ne.m),ke(ne.p)}:"rounded"===u(K)?()=>{se(),ke(ne.k),ke("#000000"+p(Y[2],0,r[2],255,0,0).toString(16));const e=s/2,l=a.createRadialGradient(e,e,0,e,e,e),o=i([0,0,Y[2]]);l.addColorStop(0,o),l.addColorStop(1,o+"00"),ke(l)}:(se(),ke(ne.k),null)})),_e=()=>{var e;Object.assign(ee,oe.value.o()),le.value=oe.value.i(),null==(e=fe.value)||e.call(fe)};o((()=>[u(K),Y]),_e,{deep:!0,flush:"post"}),n(_e);const he=h((()=>{const e=e=>{oe.value.l(e)},{start:a}=v(N,{containerElement:N,onStart:e,onMove:e});return a})),ve=h((()=>{const e=e=>{oe.value.u(e)},{start:a}=v(Q,{containerElement:Q,onStart:e,onMove:e});return a})),ye=a(e,"modelValue");return y(u(ye))||Z(ye,!1),o(Y,(e=>{ye.value=e}),{immediate:!0}),o(ye,(e=>Z(e)),{deep:!0}),(e,a)=>(b(),g(V,{ref_key:"containerRef",ref:L,role:"dialog",eager:!0,transition:"slide-y",transparent:"","content-class":["color-picker",`color-picker--${K.value}`],modelValue:J.value,"onUpdate:modelValue":a[7]||(a[7]=e=>J.value=e)},{default:x((()=>[w("div",te,[w("div",re,[a[0]||(C(-1),(a[0]=w("canvas",{ref_key:"canvasPickerRef",ref:N,width:u(s),height:u(s)},null,8,["width","height"])).cacheIndex=0,C(1),a[0]),"wheel"===K.value?(b(),F("div",ce)):U("",!0),w("div",{class:"color-picker__thumb",style:S(ee),onPointerdown:a[1]||(a[1]=(...e)=>u(he)&&u(he)(...e))},null,36)]),"wheel"!==K.value?(b(),g(P,{key:0,showRange:!1,min:"0",max:"rect"===K.value?u(r)[0]:u(r)[2],trackerBackground:"rect"===K.value?"linear-gradient(to right, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)":"linear-gradient(to right, #000, #fff)",thumbBackground:le.value.background,"model-value":"rect"===K.value?Y[0]:Y[2],"onUpdate:modelValue":oe.value.t},null,8,["max","trackerBackground","thumbBackground","model-value","onUpdate:modelValue"])):(b(),F("div",{key:1,ref_key:"secondPickerRef",ref:Q,class:"color-picker__rect-picker",style:S(ae.value)},[w("div",{class:"color-picker__thumb",rectPickerThumeStyle:"",style:S(le.value),onPointerdown:a[2]||(a[2]=(...e)=>u(ve)&&u(ve)(...e))},null,36)],4))]),w("div",de,[w("div",{class:"color-picker__preview",style:S({background:q.value})},null,4),w("label",ie,[a[8]||(a[8]=T(" Hex ")),B(w("input",{name:"color-piker-hex",maxlength:"7",size:"7","onUpdate:modelValue":a[3]||(a[3]=e=>q.value=e)},null,512),[[M,q.value,void 0,{lazy:!0}]])]),w("div",ue,[(b(),F(O,null,z([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],l,o,n)=>{const s=[Y[l]];if(n&&n.key===e&&A(n,s))return n;const t=(b(),F("label",{key:e},[T(G(a)+" ",1),B(w("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:u(r)[l],step:"any","onUpdate:modelValue":e=>Y[l]=e},null,8,me),[[M,Y[l],void 0,{lazy:!0}]])]));return t.memo=s,t}),a,4),64))]),w("div",pe,[a[9]||(a[9]=T(" 樣式 ")),R($,{items:["rect","rounded","wheel"],modelValue:K.value,"onUpdate:modelValue":a[6]||(a[6]=e=>K.value=e)},null,8,["modelValue"])])])])),_:1},8,["content-class","modelValue"]))}}),fe=["min","max"],_e=e({__name:"HarmonyGenDialog",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const n=a(e,"modelValue"),s=l(!1),d=J(),i=l([0,r[1],r[2]]),m=t({method:0,num:6}),p=c((()=>{const e=K(L[m.method]);return H(e([...u(i)],m.num),(e=>N(Q(e))))})),k=l(!0),f=()=>{d.h(u(k)?u(p):u(h))};o((()=>[u(k),u(p)]),f);const _=()=>{d.h(u(p)),v(),ne(n)},h=l([[]]),v=()=>{h.value=H(d.v,(e=>e.V))};return o(n,(e=>{e?(v(),f()):d.h(u(h))}),{immediate:!0}),(e,a)=>(b(),g(V,{"content-class":u(se).genDialog,role:"dialog",eager:!0,transition:"slide-y",transparent:"",modelValue:n.value,"onUpdate:modelValue":a[12]||(a[12]=e=>n.value=e)},{default:x((()=>[a[0]||(C(-1),(a[0]=w("header",{class:W(u(se).header)},[a[13]||(a[13]=w("h2",null,"調和調色盤",-1)),R(X,{icon:"x-lg","aria-label":"關閉",onClick:e=>n.value=!1},null,8,["onClick"])],2)).cacheIndex=0,C(1),a[0]),w("div",{class:W(u(se).content)},[Y(p.value,(()=>(b(),F("div",{class:W(u(se).palette)},[R(Z,{location:"top",text:"Copied",openOnHover:!1,openOnClick:"",eager:!1},{activator:x((({handleClick:e})=>[(b(!0),F(O,null,z(p.value,((a,l)=>(b(),g(X,{key:l,style:S({background:a}),ripple:!1,onClick:a=>{var o;o=l,oe(u(p)[o]),e(a)}},null,8,["style","onClick"])))),128))])),_:1})],2))),a,1),Y([p.value[0]],(()=>R(X,{style:S({color:u(q)(u(I)(p.value[0]))>127?"#000":"#FFF",background:p.value[0]}),"prepend-icon":"eyedropper",text:"開啟color picker",onClick:a[2]||(a[2]=e=>s.value=!s.value)},null,8,["style"])),a,3),R(ke,{modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value=e),show:s.value,"onUpdate:show":a[5]||(a[5]=e=>s.value=e)},null,8,["modelValue","show"]),w("div",null,[a[14]||(a[14]=T(" 調和方法 ")),R($,{items:u(L),index:m.method,"onUpdate:index":a[6]||(a[6]=e=>m.method=e)},null,8,["items","index"])]),1<=m.method&&m.method<=3?Y([m],(()=>(b(),F("div",{key:0,class:W(u(se).numbers)},[a[15]||(a[15]=w("label",{for:"harmony-num"},"數量",-1)),B(w("input",{id:"harmony-num",name:"harmony-num",type:"number",min:u(ae),max:u(ee),"onUpdate:modelValue":a[7]||(a[7]=e=>m.num=e)},null,8,fe),[[M,m.num,void 0,{lazy:!0,number:!0}]])],2))),a,8):U("",!0),a[9]||(C(-1),(a[9]=w("div",{class:"spacer"})).cacheIndex=9,C(1),a[9]),w("div",{class:W(u(se).buttons)},[w("label",null,[B(w("input",{type:"checkbox",name:"preview","onUpdate:modelValue":a[10]||(a[10]=e=>k.value=e)},null,512),[[le,k.value]]),a[16]||(a[16]=T(" 預覽 "))]),a[11]||(C(-1),(a[11]=R(X,{onClick:_,text:"確定"})).cacheIndex=11,C(1),a[11])],2)],2)])),_:1},8,["content-class","modelValue"]))}});export{_e as default};
