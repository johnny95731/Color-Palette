import{d as e,r as a,a as s,H as o,c as l,b as n,h as t,i as r,e as i,o as c,w as d,u,f as m,g as p,t as _,j as f,k,l as b,s as h,m as y,C as v,n as g,p as x,q as V,v as C,F as w,x as U,y as A,z as M,A as D,B as E,D as R,E as z,G as P,I as F,J as $,K as j,L as H,M as S,N as B,_ as G,O,P as q,Q as I,R as J,S as K,T as L,U as N}from"./index-C7X2tZuC.js";const Q={class:"color-picker__edits"},T={class:"color-picker__hex-input"},W={class:"color-picker__hsb-input"},X=["name","max","onUpdate:modelValue"],Y=e({__name:"ColorPicker",props:{hsb:{},hsbModifiers:{},modelValue:{},modelModifiers:{}},emits:["update:hsb","update:modelValue"],setup(e){const z=a(),P=a(),F=a(),$=a(),j=s([0,.8*o[1],.8*o[2]]),H=(e,a=!0)=>{let s="string"==typeof(e=_(e))?D(E(e)):e;a&&(s=s.map((e=>R(e,2)))),Object.assign(j,s)},S=l({get:()=>n(t(j)),set(e){r(e)&&e!==S.value&&H(e)}}),B=l((()=>n(t([j[0],o[1],o[2]])))),G=l((()=>({top:o[2]-j[2]+"%",left:`${j[1]}%`,backgroundColor:n(t(j))}))),O=l((()=>`${i(j[0],0,o[0],0,100)}%`)),q=l((()=>{var e;return null==(e=F.value)?void 0:e.getContext("2d")}));function I(){const e=_(q);if(!e)return;e.clearRect(0,0,270,135),e.fillStyle=_(B),e.fillRect(0,0,+v.o,+v.l);const a=e.createLinearGradient(0,0,+v.o,0);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=a,e.fillRect(0,0,+v.o,+v.l);const s=e.createLinearGradient(0,0,0,+v.l);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=s,e.fillRect(0,0,+v.o,+v.l)}c(I),d(B,I),(()=>{const e=e=>{j[1]=i(e.x,0,100,0,o[1],2),j[2]=i(e.y,0,100,o[2],0,2)};u(P,{containerElement:P,onStart:e,onMove:e})})(),(()=>{const e=e=>{const a=i(e.y,0,100,0,o[0],2);j[0]=a};u($,{containerElement:$,onStart:e,onMove:e,axis:"y"})})();const J=m(e,"hsb"),K=m(e,"modelValue");return(()=>{const e=p(_(J)),a=p(_(K));!e&&a?H(J,!1):e&&!a&&H(K,!1)})(),d(j,(e=>{J.value=e,K.value=_(G).backgroundColor}),{deep:!0,immediate:!0}),d(J,(e=>H(e)),{deep:!0}),d(K,(e=>{e!==_(S)&&H(e)})),(e,a)=>(f(),k("div",{ref_key:"containerRef",ref:z,class:"color-picker"},[b("div",{ref_key:"containerRef",ref:z,class:"color-picker__pickers"},[b("div",{ref_key:"colorPickerRef",ref:P,class:"color-picker__sat-bri"},[a[0]||(h(-1),(a[0]=b("canvas",{ref_key:"colorPickerCanvasRef",ref:F,width:y(v).o,height:y(v).l},null,8,["width","height"])).cacheIndex=0,h(1),a[0]),b("div",{class:"color-picker__thumb",style:g(G.value)},null,4)],512),b("div",{ref_key:"huePickerRef",ref:$,class:"color-picker__hue"},[a[1]||(h(-1),(a[1]=b("div",{class:"color-picker__hue-track"})).cacheIndex=1,h(1),a[1]),b("div",{class:"color-picker__thumb",style:g({top:O.value,backgroundColor:B.value})},null,4)],512)],512),b("div",Q,[b("label",T,[a[5]||(a[5]=x(" Hex ")),V(b("input",{name:"color-piker-hex",maxlength:"7",size:"7","onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e)},null,512),[[C,S.value,void 0,{lazy:!0}]])]),b("div",W,[(f(),k(w,null,U([["hue","色調"],["sat","彩度"],["bri","亮度"]],(([e,a],s,l,n)=>{const t=[j[s]];if(n&&n.key===e&&A(n,t))return n;const r=(f(),k("label",{key:e},[x(M(a)+" ",1),V(b("input",{name:`color-piker-${e}`,type:"number",inputmode:"decimal",min:"0",max:y(o)[s],step:"any","onUpdate:modelValue":e=>j[s]=e},null,8,X),[[C,j[s],void 0,{lazy:!0}]])]));return r.memo=t,r}),a,3),64))])])],512))}}),Z=["min","max"],ee=((e,a)=>{const s=e.__vccOpts||e;for(const[o,l]of a)s[o]=l;return s})(e({__name:"HarmonyGenDialog",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(e){const r=m(e,"modelValue"),i=z(),c=a([[]]),u=()=>{c.value=i.cards.map((e=>e.color))};d(r,(()=>{P(r)?u():i.setPlt(P(c))}),{immediate:!0});const p=a([0,.85*o[1],.85*o[2]]),_=s({method:0,num:6}),v=l((()=>F($[_.method])([...P(p)],_.num).map((e=>n(t(e)))))),A=()=>i.setPlt(P(v)),M=()=>{A(),u(),N(r)};return(e,a)=>(f(),j(L,{"content-class":e.$style.genDialog,role:"dialog",eager:!0,transition:"slide-y",transparent:"",modelValue:r.value,"onUpdate:modelValue":a[5]||(a[5]=e=>r.value=e)},{default:H((()=>[a[0]||(h(-1),(a[0]=b("header",{class:S(e.$style.header)},[a[6]||(a[6]=b("h2",null,"調和調色盤",-1)),B(G,{icon:"close","aria-label":"close",onClick:e=>r.value=!1},null,8,["onClick"])],2)).cacheIndex=0,h(1),a[0]),b("div",{class:S(e.$style.content)},[b("div",{class:S(e.$style.palette)},[(f(!0),k(w,null,U(v.value,(e=>(f(),k("div",{key:e,style:g({background:e})},null,4)))),128))],2),B(Y,{hsb:p.value,"onUpdate:hsb":a[1]||(a[1]=e=>p.value=e)},null,8,["hsb"]),B(O,{options:y($),index:_.method,"onUpdate:index":a[2]||(a[2]=e=>_.method=e)},null,8,["options","index"]),1<=_.method&&_.method<=3?q([_],(()=>(f(),k("div",{key:0,class:S(e.$style.numbers)},[a[7]||(a[7]=b("label",{for:"harmony-num"},"數量",-1)),V(b("input",{id:"harmony-num",name:"harmony-num",type:"number",min:y(I),max:y(J),"onUpdate:modelValue":a[3]||(a[3]=e=>_.num=e)},null,8,Z),[[C,_.num,void 0,{lazy:!0,number:!0}]])],2))),a,4):K("",!0),a[10]||(a[10]=b("div",{class:"spacer"},null,-1)),b("div",{class:S(e.$style.buttons)},[B(G,{onClick:A},{default:H((()=>a[8]||(a[8]=[x(" 預覽 ")]))),t:1}),B(G,{onClick:M},{default:H((()=>a[9]||(a[9]=[x(" 確定 ")]))),t:1})],2)],2)])),t:1},8,["content-class","modelValue"]))}}),[["__cssModules",{$style:{color1:"#FAFAFA",color2:"#EAEAEA",color3:"#C0C0C0",color4:"#707070",color5:"#1D1D57",genDialog:"_genDialog_fn43w_9",header:"_header_fn43w_21",content:"_content_fn43w_42",palette:"_palette_fn43w_51",numbers:"_numbers_fn43w_66",buttons:"_buttons_fn43w_77"}}]]);export{ee as default};
